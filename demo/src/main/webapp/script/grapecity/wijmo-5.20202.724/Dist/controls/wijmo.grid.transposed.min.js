/*!
    *
    * Wijmo Library 5.20202.724
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */

var wijmo,__extends=this&&this.__extends||function(){var extendStatics=function(e,n){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)n.hasOwnProperty(o)&&(e[o]=n[o])})(e,n)};return function(e,n){extendStatics(e,n);function __(){this.constructor=e}e.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}();!function(e){!function(n){!function(n){var o=function(n){__extends(TransposedGrid,n);function TransposedGrid(o,t){var r=n.call(this,o,null)||this;r._keyPrefix="item";r._autoGenRows=!0;e.addClass(r.hostElement,"wj-transposed-grid");r.allowSorting=e.grid.AllowSorting.None;r.headersVisibility=e.grid.HeadersVisibility.Row;r._rowInfo=new e.grid.ColumnCollection(r,r.columns.defaultSize);r.initialize(t);r._rowInfo.collectionChanged.addHandler(r._rowInfoChanged,r);r.deferUpdate((function(){var e=r.rowHeaders.columns;if(e.length){e[e.length-1].width=r.columns.defaultSize}}));return r}Object.defineProperty(TransposedGrid.prototype,"autoGenerateRows",{get:function(){return this._autoGenRows},set:function(n){this._autoGenRows=e.asBoolean(n)},enumerable:!0,configurable:!0});TransposedGrid.prototype.refresh=function(e){var o=this._rowInfo;if(o._dirty){o._dirty=!1;this._rowInfoChanged()}else n.prototype.refresh.call(this,e)};Object.defineProperty(TransposedGrid.prototype,"allowAddNew",{get:function(){return!1},set:function(e){},enumerable:!0,configurable:!0});Object.defineProperty(TransposedGrid.prototype,"allowDelete",{get:function(){return!1},set:function(e){},enumerable:!0,configurable:!0});TransposedGrid.prototype.onRowEditEnded=function(o){if(null!=this._view){var t=new e.collections.NotifyCollectionChangedEventArgs(e.collections.NotifyCollectionChangedAction.Change);this._view.collectionChanged.raise(this._view,t)}n.prototype.onRowEditEnded.call(this,o)};TransposedGrid.prototype._getCollectionView=function(o){var t=this,r=null;null!=this._view&&this._view.collectionChanged.removeHandler(this._sourceViewChanged);if(e.isArray(o))o=this._transposeItemsSource(o);else if(o){this._view&&this._view.collectionChanged.removeHandler(this._sourceViewChanged);this._view=e.tryCast(o,"ICollectionView");if(this._view){this._view.collectionChanged.addHandler(this._sourceViewChanged,this);o instanceof e.collections.CollectionView&&(r=o.getError);o=this._transposeItemsSource(this._view.items)}}this.autoGenerateColumns=!0;var i=n.prototype._getCollectionView.call(this,o);r&&i instanceof e.collections.CollectionView&&(this._supportsProxies()?i.getError=function(e,n){var o=e._keys.indexOf(n);return r(e._arr[o],e._bnd.path)}:i.getError=function(e,n){var o=parseInt(n.substr(t._keyPrefix.length));return r(e._arr[o],e._rowInfo.binding)});return i};TransposedGrid.prototype._getColumnTypes=function(n){var o=this;if(this._view){var t=this._view.items;if(e.isArray(t))return t.map((function(n,t){return{binding:o._keyPrefix+t,dataType:e.DataType.Object}}))}return e.getTypes(n)};TransposedGrid.prototype._copy=function(o,t){var r=this;if(/rows|columns/.test(o)){e.assert(e.isArray(t),"Array Expected.");this._rowInfo.deferUpdate((function(){r.autoGenerateRows=!1;r._rowInfo.clear();t.forEach((function(n){var o=new e.grid.Column(n);r._rowInfo.push(o)}))}));return!0}return n.prototype._copy.call(this,o,t)};TransposedGrid.prototype.onLoadedRows=function(o){for(var t=this,r=this.rowHeaders.columns,i=0;i<r.length;i++)r[i].align="left";var s=this.columns;for(i=0;i<s.length;i++){var a=s[i];a.align=null;a.dataType=0}var d=e.grid.FlexGrid._getSerializableProperties(e.grid.Row);this.rows.forEach((function(n){var o=n.dataItem._rowInfo;if(o){t._copyProps(o,n,d,"showDropDown");if(r.length){var i=o.header||e.toHeaderCase(o.binding);t.rowHeaders.setCellData(n.index,r.length-1,i)}}}));n.prototype.onLoadedRows.call(this,o)};TransposedGrid.prototype._getBindingColumn=function(n,o,t){var r=t;if(n!=this.cells)return r;var i=n.rows[o].dataItem._rowInfo;if(e.isUndefined(i))return r;r=new e.grid.Column;var s=e.grid.FlexGrid._getSerializableProperties(e.grid.Column);this._copyProps(i,r,s);r.binding=t.binding;r.header=i.header||e.toHeaderCase(i.binding);return r};TransposedGrid.prototype._copyProps=function(n,o,t,r){void 0===r&&(r="");for(var i in n)if(t.indexOf(i)>-1&&i!=r){var s=n[i];if(!e.isUndefined(s))try{o[i]=s}catch(e){}}};TransposedGrid.prototype._rowInfoChanged=function(){var n=this;this._toRowInfo&&clearTimeout(this._toRowInfo);this._toRowInfo=setTimeout((function(){var e=n.selection,o=n.itemsSource;n.itemsSource=null;n.itemsSource=o;n.selection=e}),e.Control._REFRESH_INTERVAL)};TransposedGrid.prototype._sourceViewChanged=function(e,n){this.activeEditor||this.invalidate()};TransposedGrid.prototype._transposeItemsSource=function(n){var o=this,t=new e.collections.ObservableArray,r=e.getTypes(n),i=n.map((function(e,n){return o._keyPrefix+n}));(this.autoGenerateRows?this._getRowInfo(n):this._rowInfo).forEach((function(s,a){var d=new e.Binding(s.binding);if(null==s.dataType){var l=d.getValue(n[0]);s.dataType=null!=l?e.getType(l):r[a].dataType}if(o._supportsProxies()){var c=o._createProxy(n,s,i);t.push(c)}else{var u=o._createTransposedObject(n,s,o._keyPrefix);t.push(u)}}));n instanceof e.collections.ObservableArray&&n.collectionChanged.addHandler((function(){var n=new e.collections.NotifyCollectionChangedEventArgs(e.collections.NotifyCollectionChangedAction.Reset);t.onCollectionChanged(n);o._rowInfoChanged()}));return t};TransposedGrid.prototype._supportsProxies=function(){return null!=window.Proxy};TransposedGrid.prototype._createProxy=function(n,o,t){var r={_arr:n,_rowInfo:o,_bnd:new e.Binding(o.binding),_keys:t};return new Proxy(r,{ownKeys:function(e){return e._keys},getOwnPropertyDescriptor:function(){return{enumerable:!0,configurable:!0,writable:!0}},get:function(e,n){var o=e._keys.indexOf(n);return o>-1?e._bnd.getValue(e._arr[o]):e[n]},set:function(n,o,t){var r=n._keys.indexOf(o);if(r>-1){var i=n._arr,s=i[r];n._bnd.setValue(s,t);if(i instanceof e.collections.ObservableArray){var a=new e.collections.NotifyCollectionChangedEventArgs(e.collections.NotifyCollectionChangedAction.Change,s,r);i.onCollectionChanged(a)}return!0}return!1}})};TransposedGrid.prototype._createTransposedObject=function(n,o,t){for(var r={_arr:n,_rowInfo:o},i=new e.Binding(o.binding),_loop_1=function(o){var s=n[o];Object.defineProperty(r,t+o,{enumerable:!0,get:function(){return i.getValue(s)},set:function(t){i.setValue(s,t);if(n instanceof e.collections.ObservableArray){var r=new e.collections.NotifyCollectionChangedEventArgs(e.collections.NotifyCollectionChangedAction.Change,s,o);n.onCollectionChanged(r)}return!0}})},s=0;s<n.length;s++)_loop_1(s);return r};TransposedGrid.prototype._getRowInfo=function(n){var o=this,t=[];e.getTypes(n).forEach((function(n){var r=n.binding,i=n.dataType;if(i!=e.DataType.Object&&i!=e.DataType.Array){var s={binding:r,header:e.toHeaderCase(r),dataType:i},a=e.grid.FlexGrid._defTypeWidth[i];if(null!=a){if(e.isString(a)){var d=Math.round(parseFloat(a));a=a.indexOf("*")<0?d:d*o.columns.defaultSize}e.isNumber(a)&&a>0&&(s.width=a)}t.push(s)}}));return t};return TransposedGrid}(e.grid.FlexGrid);n.TransposedGrid=o;var t=function(e){__extends(TransposedGridRow,e);function TransposedGridRow(){return null!==e&&e.apply(this,arguments)||this}return TransposedGridRow}(e.grid.Column);n.TransposedGridRow=t}(n.transposed||(n.transposed={}))}(e.grid||(e.grid={}))}(wijmo||(wijmo={}));!function(e){!function(n){n.transposed||(n.transposed={}),e._registerModule("wijmo.grid.transposed",e.grid.transposed)}(e.grid||(e.grid={}))}(wijmo||(wijmo={}));