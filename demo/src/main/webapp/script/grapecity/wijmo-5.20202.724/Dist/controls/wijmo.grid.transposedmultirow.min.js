/*!
    *
    * Wijmo Library 5.20202.724
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */

var wijmo,__extends=this&&this.__extends||function(){var extendStatics=function(t,o){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(t,o)};return function(t,o){extendStatics(t,o);function __(){this.constructor=t}t.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}();!function(t){!function(o){!function(o){"use strict";var e=function(t){__extends(_MultiRow,t);function _MultiRow(o,e){var r=t.call(this,o)||this;r._idxData=e;return r}return _MultiRow}(t.grid.Row);o._MultiRow=e}(o.transposedmultirow||(o.transposedmultirow={}))}(t.grid||(t.grid={}))}(wijmo||(wijmo={}));!function(t){!function(o){!function(o){"use strict";var e=function(o){__extends(_Cell,o);function _Cell(e){var r=o.call(this)||this;r._row=r._col=0;r._rowspan=r._colspan=1;t.copy(r,e);return r}Object.defineProperty(_Cell.prototype,"row",{get:function(){return this._row},set:function(o){this._row=t.asInt(o,!1,!0)},enumerable:!0,configurable:!0});Object.defineProperty(_Cell.prototype,"col",{get:function(){return this._col},set:function(o){this._col=t.asInt(o,!1,!0)},enumerable:!0,configurable:!0});Object.defineProperty(_Cell.prototype,"colspan",{get:function(){return this._colspan},set:function(o){this._colspan=t.asInt(o,!1,!0);t.assert(this._colspan>0,"colspan must be >= 1")},enumerable:!0,configurable:!0});Object.defineProperty(_Cell.prototype,"rowspan",{get:function(){return this._rowspan},set:function(o){this._rowspan=t.asInt(o,!1,!0);t.assert(this._rowspan>0,"colspan must be >= 1")},enumerable:!0,configurable:!0});return _Cell}(t.grid.Column);o._Cell=e}(o.transposedmultirow||(o.transposedmultirow={}))}(t.grid||(t.grid={}))}(wijmo||(wijmo={}));!function(t){!function(o){!function(o){"use strict";var e=function(e){__extends(_CellGroup,e);function _CellGroup(o,r){var n=e.call(this)||this;n._colstart=0;n._rowstart=0;n._layout=o;n._g=o._grid;t.copy(n,r);if(!n._cells)throw"Cell group with no cells?";var i=0,l=0;n._cells.forEach((function(t,o){for(;!n._cellFits(t,o,i,l);)0==(l=(l+1)%n.colspan)&&i++;t.row=i;t.col=l}));var s=1,a=1;n._cells.forEach((function(t){s=Math.max(s,t.row+t.rowspan);a=Math.max(a,t.col+t.colspan)}));n.rowspan=s;n.colspan=a;return n}_CellGroup.prototype._copy=function(e,r){var n=this;if("cells"==e){this._cells=[];t.isArray(r)&&r.forEach((function(e){var r=new o._Cell(e);r.binding&&!r.header&&(r.header=t.toHeaderCase(r.binding));n._cells.push(r);n.colspan=Math.max(n.colspan,r.colspan)}));return!0}return!1};Object.defineProperty(_CellGroup.prototype,"cells",{get:function(){return this._cells},enumerable:!0,configurable:!0});_CellGroup.prototype.closeGroup=function(o){var e=this;if(o>this.colspan){this._cells.forEach((function(t){t.col==e.colspan-1&&(t.colspan=o-t.col)}));this.colspan=o}this._cells.forEach((function(t){for(;t.col+t.colspan<e.colspan&&!e._slotTaken(t.row,t.col+t.colspan);)t.colspan++}));this._cells.forEach((function(t){for(;t.row+t.rowspan<e.rowspan&&!e._slotTaken(t.row+t.rowspan,t.col);)t.rowspan++}));for(var r=0;r<this.rowspan;r++)for(var n=0;n<this.colspan;n++)t.assert(this._slotTaken(r,n),"Invalid layout (empty cells).");this._cols=new t.grid.ColumnCollection(this._g,this._g.columns.defaultSize);this._rng=new Array(o*this.rowspan);this._cells.forEach((function(o){for(var r=0;r<o.rowspan;r++)for(var n=0;n<o.colspan;n++){var i=(o.row+r)*e.colspan+(o.col+n);e._cols.setAt(i,o);var l=new t.grid.CellRange(o.row,o.col,o.row+o.rowspan-1,o.col+o.colspan-1);l.isSingleCell||(e._rng[i]=l)}}));this._rng[-1]=new t.grid.CellRange(this._rowstart,this._colstart,this._rowstart+this._rowspan-1,this._colstart)};_CellGroup.prototype.getMergedRange=function(o,e,r){if(r<0)return this._rng[-1];var n=e-this._rowstart,i=r%this.colspan,l=this._rng[n*this.colspan+i];o.cellType==t.grid.CellType.RowHeader&&r++;var s=e-n,a=r-i;return l?new t.grid.CellRange(s+l.row,a+l.col,s+l.row2,a+l.col2):null};_CellGroup.prototype.getBindingColumn=function(t,o,e){if(e<0)return this;var r=o-this._rowstart,n=e%this.colspan;return this._cols[r*this.colspan+n]};_CellGroup.prototype._cellFits=function(t,o,e,r){if(r>0&&r+t.colspan>this.colspan)return!1;for(var n=0;n<t.colspan;n++)if(this._slotTaken(e,r+n,o))return!1;this.colspan=Math.max(this.colspan,r+t.colspan-1);return!0};_CellGroup.prototype._slotTaken=function(t,o,e){void 0===e&&(e=this._cells.length);for(var r=0;r<e;r++){var n=this._cells[r];if(t>=n.row&&t<=n.row+n.rowspan-1&&o>=n.col&&o<=n.col+n.colspan-1)return!0}return!1};_CellGroup.prototype._updateCellTypes=function(o){this._cols.forEach((function(e){var r=e;null==r.dataType&&r._binding&&(r.dataType=t.getType(r._binding.getValue(o)))}))};return _CellGroup}(o._Cell);o._CellGroup=e}(o.transposedmultirow||(o.transposedmultirow={}))}(t.grid||(t.grid={}))}(wijmo||(wijmo={}));!function(t){var o;(function(o){"use strict";var e=function(e){__extends(_MergeManager,e);function _MergeManager(){return null!==e&&e.apply(this,arguments)||this}_MergeManager.prototype.getMergedRange=function(e,r,n,i){void 0===i&&(i=!0);var l=e.grid;if(r<0||r>=e.rows.length||n<0||n>=e.columns.length)return null;switch(e.cellType){case t.grid.CellType.Cell:case t.grid.CellType.RowHeader:var s=e.rows[r].dataItem._rowInfo.index,a=n;e.cellType==t.grid.CellType.RowHeader&&a--;var u=l._getGroupByRow(r);t.assert(u instanceof o._CellGroup,"Failed to get the group!");var c=u.getMergedRange(e,s,a);if(c){var p=s,d=r;if(r>0){p=e.rows[r-1].dataItem._rowInfo.index;d=r-1}c.row<=p?c.row=d:c.row=r;var g=s,w=r;if(r<e.rows.length-1){g=e.rows[r+1].dataItem._rowInfo.index;w=r+1}c.row2>=g?c.row2=w:c.row2=r}t.assert(!c||c.contains(r,n),"Merged range must contain source cell");return c;case t.grid.CellType.ColumnHeader:var f=l.columnsPerItem,_=n-n%f,h=Math.min(_+f-1,e.columns.length-1);return new t.grid.CellRange(0,_,e.rows.length-1,h);case t.grid.CellType.TopLeft:return new t.grid.CellRange(0,0,e.rows.length-1,e.columns.length-1)}return null};return _MergeManager}(t.grid.MergeManager);o._MergeManager=e})((o=t.grid||(t.grid={})).transposedmultirow||(o.transposedmultirow={}))}(wijmo||(wijmo={}));!function(t){var o;(function(t){"use strict";var o=function(){function _MultiRowLayout(t,o){this._columnsPerItem=1;this._bindingGroups=[];this._groupsByRow={};this._grid=t;this._bindingGroups=this._parseCellGroups(o)}Object.defineProperty(_MultiRowLayout.prototype,"totalRowSpan",{get:function(){var t=this._bindingGroups;if(t&&t.length){var o=t[t.length-1];return o._rowstart+o.rowspan}return 0},enumerable:!0,configurable:!0});_MultiRowLayout.prototype._parseCellGroups=function(o){var e=[],r=1;if(o){for(var n=0,i=0;n<o.length;n++){var l=new t._CellGroup(this,o[n]);l._rowstart=i;i+=l._rowspan;r=Math.max(r,l._colspan);e.push(l)}e.forEach((function(t){t.closeGroup(r)}));this._columnsPerItem=r}return e};_MultiRowLayout.prototype._getGroupByRow=function(t){var o=this._getGroupIndexByRow(t);return o>-1?this._bindingGroups[o]:null};_MultiRowLayout.prototype._getGroupIndexByRow=function(t){var o=this._groupsByRow[t];if(o)return o;for(var e=this._bindingGroups,r=0;r<e.length;r++){var n=e[r];if(t>=n._rowstart&&t<=n._rowstart+n._rowspan-1){this._groupsByRow[t]=r;return r}}return-1};_MultiRowLayout.prototype._updateCellTypes=function(t){this._bindingGroups.forEach((function(o){o._updateCellTypes(t)}))};return _MultiRowLayout}();t._MultiRowLayout=o})((o=t.grid||(t.grid={})).transposedmultirow||(o.transposedmultirow={}))}(wijmo||(wijmo={}));!function(t){!function(o){!function(o){"use strict";var e=function(e){__extends(TransposedMultiRow,e);function TransposedMultiRow(r,n){var i=e.call(this,r)||this;i._bindingColumns={};i._keyPrefix="item";t.addClass(i.hostElement,"wj-transposed-multirow");i._layout=new o._MultiRowLayout(i,null);i.allowDragging=t.grid.AllowDragging.None;i.allowSorting=t.grid.AllowSorting.None;i.mergeManager=new o._MergeManager(i);i.formatItem.addHandler(i._formatItem,i);i._rowInfo=new t.grid.ColumnCollection(i,i.columns.defaultSize);i.initialize(n);i._rowInfo.collectionChanged.addHandler(i._rowInfoChanged,i);return i}Object.defineProperty(TransposedMultiRow.prototype,"layoutDefinition",{get:function(){return this._layoutDef},set:function(e){this._layoutDef=t.asArray(e);this._layout=new o._MultiRowLayout(this,e);this._rowInfoChanged()},enumerable:!0,configurable:!0});TransposedMultiRow.prototype.getBindingColumn=function(o,e,r){if(o.cellType!=t.grid.CellType.Cell)return null;var n=o.rows[e].dataItem._rowInfo.index,i=n+"_"+r,l=this._bindingColumns[i];if(l)return l;var s=this._getGroupByRow(e).getBindingColumn(o,n,r);if(s){l=new t.grid.Column;t.grid.FlexGrid._getSerializableProperties(t.grid.Column).forEach((function(t){null!=s[t]&&(l[t]=s[t])}));var a=Math.floor(r/this.columnsPerItem),u=r%this.columnsPerItem;l.binding=this._keyPrefix+a+"_"+u;this._bindingColumns[i]=l}return l};Object.defineProperty(TransposedMultiRow.prototype,"columnsPerItem",{get:function(){return this._layout._columnsPerItem},enumerable:!0,configurable:!0});Object.defineProperty(TransposedMultiRow.prototype,"allowAddNew",{get:function(){return!1},set:function(o){t.assert(!o,"TransposedMultiRow does not support items addition.")},enumerable:!0,configurable:!0});Object.defineProperty(TransposedMultiRow.prototype,"allowDelete",{get:function(){return!1},set:function(o){t.assert(!o,"TransposedMultiRow does not support items deletion.")},enumerable:!0,configurable:!0});Object.defineProperty(TransposedMultiRow.prototype,"allowDragging",{get:function(){return t.grid.AllowDragging.None},set:function(o){t.assert(o===t.grid.AllowDragging.None,"TransposedMultiRow does not support dragging.");if(o!==this._alDragging){this._alDragging=o;this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(TransposedMultiRow.prototype,"allowPinning",{get:function(){return!1},set:function(o){t.assert(!o,"TransposedMultiRow does not support pinning.")},enumerable:!0,configurable:!0});Object.defineProperty(TransposedMultiRow.prototype,"allowSorting",{get:function(){return t.grid.AllowSorting.None},set:function(o){t.assert(o===t.grid.AllowSorting.None,"TransposedMultiRow does not support sorting.");this._alSorting=o},enumerable:!0,configurable:!0});Object.defineProperty(TransposedMultiRow.prototype,"columnLayout",{get:function(){throw"TransposedMultiRow does not support column layout."},set:function(t){throw"TransposedMultiRow does not support column layout."},enumerable:!0,configurable:!0});TransposedMultiRow.prototype.refresh=function(t){var o=this._rowInfo;if(o._dirty){o._dirty=!1;this._rowInfoChanged()}else e.prototype.refresh.call(this,t)};TransposedMultiRow.prototype.onLoadedRows=function(o){for(var r=this,n=this.columnHeaders.columns,i=0;i<n.length;i++)this.columnHeaders.setCellData(0,i,"");var l=this.columns;for(i=0;i<l.length;i++){var s=l[i];s.align=null;s.dataType=0}var a=this.rowHeaders.columns;this.rows.forEach((function(o){var e=o.dataItem._rowInfo;if(e)for(var n=a.length-2;n>=0;n--){var i=e.headers[n]||t.toHeaderCase(e.bindings[n]);r.rowHeaders.setCellData(o.index,n+1,i)}}));a[0].visible=!1;for(i=1;i<a.length;i++){a[i].align="left";a[i].visible=!0;a[i].width=this.columns.defaultSize}e.prototype.onLoadedRows.call(this,o)};TransposedMultiRow.prototype._getGroupByRow=function(e){var r=this.cells.rows[e].dataItem._rowInfo.index,n=this._layout._getGroupByRow(r);t.assert(n instanceof o._CellGroup,"Failed to get the group!");return n};TransposedMultiRow.prototype._addBoundRow=function(t,e){var r=t[e];this.rows.push(new o._MultiRow(r,e))};TransposedMultiRow.prototype._updateColumnTypes=function(){e.prototype._updateColumnTypes.call(this);var o=this.collectionView;if(t.hasItems(o)&&this._layout){var r=o.items[0]._arr;r&&r.length>0&&this._layout._updateCellTypes(r[0])}};TransposedMultiRow.prototype._getBindingColumn=function(t,o,r){if(this._layout){t==this.cells&&(r=this.getBindingColumn(t,o,r.index));return r}return e.prototype._getBindingColumn.call(this,t,o,r)};TransposedMultiRow.prototype._getCollectionView=function(o){var r=null;null!=this._view&&this._view.collectionChanged.removeHandler(this._sourceViewChanged);if(t.isArray(o))o=this._transposeItemsSource(o);else if(o){this._view&&this._view.collectionChanged.removeHandler(this._sourceViewChanged);this._view=t.tryCast(o,"ICollectionView");if(this._view){this._view.collectionChanged.addHandler(this._sourceViewChanged,this);o instanceof t.collections.CollectionView&&(r=o.getError);o=this._transposeItemsSource(this._view.items)}}this.autoGenerateColumns=!0;var n=e.prototype._getCollectionView.call(this,o);r&&n instanceof t.collections.CollectionView&&(n.getError=function(t,o){var e=t._keys.indexOf(o),n=e%t._bnd.length,i=Math.floor(e/t._bnd.length);return r(t._arr[i],t._bnd[n].path)});return n};TransposedMultiRow.prototype._rowInfoChanged=function(){var t=this.selection,o=this.itemsSource;this._bindingColumns={};this.itemsSource=null;this.itemsSource=o;t&&t.isValid&&(this.selection=t)};TransposedMultiRow.prototype._formatItem=function(o,e){var r=this.columnsPerItem,n=e.panel,i=n.cellType,l=n.rows[e.range.row],s=(n.rows[e.range.row2],e.cell);i==t.grid.CellType.RowHeader&&t.toggleClass(s,"wj-group-header",0==e.range.row);if(i==t.grid.CellType.Cell||i==t.grid.CellType.RowHeader){var a=this._getGroupByRow(e.row);t.toggleClass(s,"wj-group-start",a._rowstart==e.range.row);t.toggleClass(s,"wj-group-end",a._rowstart+a._rowspan-1==e.range.row2)}if(r>1&&(i==t.grid.CellType.Cell||i==t.grid.CellType.ColumnHeader)){t.toggleClass(s,"wj-record-start",e.range.col%r==0);t.toggleClass(s,"wj-record-end",e.range.col2%r==r-1)}var u=this.alternatingRowStep;if(u&&i==t.grid.CellType.Cell){var c=this._layout.totalRowSpan,p=this._layout._bindingGroups.length,d=Math.floor(l.dataIndex/c)*p,g=l.dataIndex%c,w=(d+=this._layout._getGroupIndexByRow(g)+1)%(u+1)==0;t.toggleClass(s,"wj-alt",w)}};TransposedMultiRow.prototype._sourceViewChanged=function(t,o){this.activeEditor||this.invalidate()};TransposedMultiRow.prototype._transposeItemsSource=function(o){var e=this,r=new t.collections.ObservableArray;if(this._layout&&this._layout._bindingGroups.length){this._getRowInfo(o).forEach((function(t,n){var i=e._createKeys(o);if(e._supportsProxies()){var l=e._createProxy(o,t,i);r.push(l)}else{var s=e._createTransposedObject(o,t,i);r.push(s)}}));o instanceof t.collections.ObservableArray&&o.collectionChanged.addHandler((function(){var o=new t.collections.NotifyCollectionChangedEventArgs(t.collections.NotifyCollectionChangedAction.Reset);r.onCollectionChanged(o);e._rowInfoChanged()}))}return r};TransposedMultiRow.prototype._createKeys=function(t){var o=this,e=Array.apply(null,{length:this.columnsPerItem}),r=t.map((function(t,r){return e.map((function(t,e){return o._keyPrefix+r+"_"+e}))}));return[].concat.apply([],r)};TransposedMultiRow.prototype._supportsProxies=function(){return null!=window.Proxy};TransposedMultiRow.prototype._createProxy=function(o,e,r){var n={_arr:o,_rowInfo:e,_bnd:e.bindings.map((function(o){return new t.Binding(o)})),_keys:r};return new Proxy(n,{ownKeys:function(t){return t._keys},getOwnPropertyDescriptor:function(){return{enumerable:!0,configurable:!0,writable:!0}},get:function(t,o){var e=t._keys.indexOf(o);if(e>-1){var r=t._bnd,n=t._arr,i=r.length,l=e%i,s=Math.floor(e/i);return r[l].getValue(n[s])}return t[o]},set:function(o,e,r){var n=o._keys.indexOf(e);if(n>-1){var i=o._bnd,l=o._arr,s=i.length,a=n%s,u=Math.floor(n/s);i[a].setValue(l[u],r);if(l instanceof t.collections.ObservableArray){var c=new t.collections.NotifyCollectionChangedEventArgs(t.collections.NotifyCollectionChangedAction.Change,l[u],u);l.onCollectionChanged(c)}return!0}return!1}})};TransposedMultiRow.prototype._createTransposedObject=function(o,e,r){for(var n={_arr:o,_rowInfo:e,_bnd:e.bindings.map((function(o){return new t.Binding(o)})),_keys:r},_loop_1=function(e){var i=r[e];Object.defineProperty(n,i,{enumerable:!0,get:function(){var t=n._bnd,r=t.length,i=e%r,l=Math.floor(e/r);return t[i].getValue(o[l])},set:function(r){var i=n._bnd,l=i.length,s=e%l,a=Math.floor(e/l);i[s].setValue(o[a],r);if(o instanceof t.collections.ObservableArray){var u=new t.collections.NotifyCollectionChangedEventArgs(t.collections.NotifyCollectionChangedAction.Change,o[a],a);o.onCollectionChanged(u)}return!0}})},i=0;i<r.length;i++)_loop_1(i);return n};TransposedMultiRow.prototype._getRowInfo=function(o){var e=[];if(this._layout){for(var r=this.rowHeaders.columns,n=this.columnsPerItem+1;r.length>n;)r.removeAt(r.length-1);for(;r.length<n;)r.push(new t.grid.Column);this._layout._bindingGroups.forEach((function(t){for(var o=0;o<t.rowspan;o++){for(var r={index:t._rowstart+o,bindings:[],headers:[]},n=0;n<t.colspan;n++)for(var i=0;i<t.cells.length;i++){var l=t.cells[i];if(o>=l.row&&o<l.row+l.rowspan&&n>=l.col&&n<l.col+l.colspan){r.bindings.push(l.binding);r.headers.push(l.header);break}}e.push(r)}}))}return e};return TransposedMultiRow}(t.grid.FlexGrid);o.TransposedMultiRow=e}(o.transposedmultirow||(o.transposedmultirow={}))}(t.grid||(t.grid={}))}(wijmo||(wijmo={}));!function(t){!function(o){o.transposedmultirow||(o.transposedmultirow={}),t._registerModule("wijmo.grid.transposedmultirow",t.grid.transposedmultirow)}(t.grid||(t.grid={}))}(wijmo||(wijmo={}));