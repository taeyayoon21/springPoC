/*!
    *
    * Wijmo Library 5.20202.724
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const selfModule=require("wijmo/wijmo"),_agent="undefined"!=typeof navigator?navigator.userAgent:"",_isMobile=null!=_agent.match(/iPad|iPhone|iPod|Android|webOS|BlackBerry|Windows Phone/i);function isMobile(){return _isMobile}exports.isMobile=isMobile;const _isiOS=null!=_agent.match(/iPad|iPhone|iPod/i);function isiOS(){return _isiOS}exports.isiOS=isiOS;const _isFF=null!=_agent.match(/Firefox\//);function isFirefox(){return _isFF}exports.isFirefox=isFirefox;const _isSafari=null!=_agent.match(/^((?!Chrome|Android).)*safari/i);function isSafari(){return _isSafari}exports.isSafari=isSafari;const _isEdge=null!=_agent.match(/Edge\//);function isEdge(){return _isEdge}exports.isEdge=isEdge;const _isIE=null!=_agent.match(/MSIE |Trident\/|Edge\//);function isIE(){return _isIE}exports.isIE=isIE;let _isIE9=!1;function isIE9(){return _isIE9}exports.isIE9=isIE9;let _isIE10=!1;function isIE10(){return _isIE10}exports.isIE10=isIE10;let _supportsPassive=!1;"undefined"!=typeof document&&document.addEventListener("test",e=>{},{get passive(){_supportsPassive=!0;return!0}});function getEventOptions(e,t){return _supportsPassive?{capture:e,passive:t}:e}exports.getEventOptions=getEventOptions;var _supportsFocusOptions=!1;"undefined"!=typeof document&&document.createElement("div").focus({get preventScroll(){_supportsFocusOptions=!0;return!0}});function supportsFocusOptions(){return _supportsFocusOptions}exports.supportsFocusOptions=supportsFocusOptions;function _startDrag(e,t){e.effectAllowed=t;isFirefox()&&e.setData("text","")}exports._startDrag=_startDrag;if("undefined"!=typeof document&&document.doctype){navigator.appVersion.indexOf("MSIE 10")>-1&&(_isIE10=!0);if(navigator.appVersion.indexOf("MSIE 9")>-1){_isIE9=!0;document.addEventListener("mousemove",e=>{if(1==e.which){let t=closest(e.target,".wj-control");if(t&&!t.style.cursor)for(let t=e.target;t;t=t.parentElement)if(t.attributes&&t.attributes.draggable){t.dragDrop();return!1}}})}}if("undefined"!=typeof window){let e="requestAnimationFrame",t="cancelAnimationFrame";if(!window[e]){let s=0;window[e]=e=>{let t=Date.now(),i=16-(t-s),r=i>0?i:0;s=t+r;return setTimeout(()=>{e(s)},r)};window[t]=clearTimeout}if(!window.atob){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t=new RegExp("[^"+e+"]");window.atob=s=>{let i,r,n,o,a=[],l=0,h=s.length;if(t.test(s)||/=/.test(s)&&(/=[^=]/.test(s)||/={3}/.test(s)))throw new Error("Invalid base64 data");h%4>0&&(h=(s+=Array(4-h%4+1).join("=")).length);for(;l<h;){for(r=[],o=l;l<o+4;)r.push(e.indexOf(s.charAt(l++)));n=[((i=(r[0]<<18)+(r[1]<<12)+((63&r[2])<<6)+(63&r[3]))&255<<16)>>16,64===r[2]?-1:(65280&i)>>8,64===r[3]?-1:255&i];for(o=0;o<3;++o)(n[o]>=0||0===o)&&a.push(String.fromCharCode(n[o]))}return a.join("")};window.btoa=t=>{let s,i,r=[],n=0,o=t.length;for(;n<o;){s=((i=[t.charCodeAt(n++),t.charCodeAt(n++),t.charCodeAt(n++)])[0]<<16)+((i[1]||0)<<8)+(i[2]||0);r.push(e.charAt((s&63<<18)>>18),e.charAt((258048&s)>>12),e.charAt(isNaN(i[1])?64:(4032&s)>>6),e.charAt(isNaN(i[2])?64:63&s))}return r.join("")}}}const _getProxyTarget="undefined"!=typeof window&&window.Symbol?Symbol("_getProxyTarget"):"\t_get\tProxy\tTarget\t";function _getCalculatedArray(e,t,s){let i=new WeakMap;if(!s){let t={};if(e.length){let i=e[0];for(let e in i){let s=typeof i[e];t[e]="string"==s?"":"number"==s?0:null}s=t}}return new Proxy(e,{get(e,r){if(r===_getProxyTarget)return e;if("string"==typeof r||"number"==typeof r){let n=parseInt(r);if(!isNaN(n)){let r=e[n];if(r&&!r[_getProxyTarget]){let e=i.get(r);if(!e){e=_createItemProxy(r,t,s);i.set(r,e)}r=e}return r}}return Reflect.get(e,r)}})}exports._getCalculatedArray=_getCalculatedArray;function _createItemProxy(e,t,s){if(!e[_getProxyTarget]){if(isIE())for(let s in t)e[s]=null;let i={get:(e,i,r)=>{if(i===_getProxyTarget)return e;if("constructor"===i)return()=>Object.assign({},s||{});let n=t[i];if(n)switch(typeof n){case"function":return n(r);case"string":return _eval(n,r)}return e[i]}};if(!isIE()){i.ownKeys=e=>Object.keys(e).concat(Object.keys(t));i.getOwnPropertyDescriptor=(e,s)=>s in t?{enumerable:!0,configurable:!0,writable:!1}:Reflect.getOwnPropertyDescriptor(e,s)}e=new Proxy(e,i)}return e}function _eval(e,t){let s=[t];return new Function(...["$"],"return "+e)(...s)}class Binding{constructor(e){this.path=e}get path(){return this._path}set path(e){this._path=e;this._parts=e?e.split("."):[];for(let e=0;e<this._parts.length;e++){let t=this._parts[e],s=t.indexOf("[");if(s>-1){this._parts[e]=t.substr(0,s);this._parts.splice(++e,0,parseInt(t.substr(s+1)))}}this._key=1==this._parts.length?this._parts[0]:null}getValue(e){if(e){if(this._key)return e[this._key];if(this._path&&this._path in e)return e[this._path];for(let t=0;t<this._parts.length&&e;t++)e=e[this._parts[t]]}return e}setValue(e,t){if(e){if(this._path in e){e[this._path]=t;return}for(let t=0;t<this._parts.length-1;t++)if(null==(e=e[this._parts[t]]))return;e[this._parts[this._parts.length-1]]=t}}}exports.Binding=Binding;class EventHandler{constructor(e,t){this.handler=e;this.self=t}}class Event{constructor(e){this._handlers=[];this._handlersChanged=e}addHandler(e,t){e=asFunction(e);this._handlers.push(new EventHandler(e,t));isFunction(this._handlersChanged)&&this._handlersChanged()}removeHandler(e,t){let s=!1;e=asFunction(e);for(let i=0;i<this._handlers.length;i++){let r=this._handlers[i];if(!(r.handler!=e&&null!=e||r.self!=t&&null!=t)){this._handlers.splice(i,1);s=!0;if(e&&t)break}}s&&isFunction(this._handlersChanged)&&this._handlersChanged()}removeAllHandlers(){let e=this._handlers.length>0;this._handlers.length=0;e&&isFunction(this._handlersChanged)&&this._handlersChanged()}raise(e,t=EventArgs.empty){let s=this._handlers;for(let i=0;i<s.length;i++){let r=s[i];r.handler.call(r.self,e,t);s[i]!==r&&i--}}get hasHandlers(){return this._handlers.length>0}get handlerCount(){return this._handlers.length}}exports.Event=Event;class EventArgs{}EventArgs.empty=new EventArgs;exports.EventArgs=EventArgs;class CancelEventArgs extends EventArgs{constructor(){super(...arguments);this.cancel=!1}}exports.CancelEventArgs=CancelEventArgs;class PropertyChangedEventArgs extends EventArgs{constructor(e,t,s){super();this._name=e;this._oldVal=t;this._newVal=s}get propertyName(){return this._name}get oldValue(){return this._oldVal}get newValue(){return this._newVal}}exports.PropertyChangedEventArgs=PropertyChangedEventArgs;class RequestErrorEventArgs extends CancelEventArgs{constructor(e,t){super();this._xhr=e;this._msg=t}get request(){return this._xhr}get message(){return this._msg}set message(e){this._msg=e}}exports.RequestErrorEventArgs=RequestErrorEventArgs;var NotifyCollectionChangedAction;!function(e){e[e.Add=0]="Add";e[e.Remove=1]="Remove";e[e.Change=2]="Change";e[e.Reset=3]="Reset"}(NotifyCollectionChangedAction=exports.NotifyCollectionChangedAction||(exports.NotifyCollectionChangedAction={}));class NotifyCollectionChangedEventArgs extends EventArgs{constructor(e=NotifyCollectionChangedAction.Reset,t=null,s=-1){super();this.action=e;this.item=t;this.index=s}}NotifyCollectionChangedEventArgs.reset=new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset);exports.NotifyCollectionChangedEventArgs=NotifyCollectionChangedEventArgs;class SortDescription{constructor(e,t){this._bnd=new Binding(e);this._asc=t}get property(){return this._bnd.path}get ascending(){return this._asc}}exports.SortDescription=SortDescription;class PageChangingEventArgs extends CancelEventArgs{constructor(e){super();this.newPageIndex=e}}exports.PageChangingEventArgs=PageChangingEventArgs;class GroupDescription{groupNameFromItem(e,t){return""}namesMatch(e,t){return e===t}}exports.GroupDescription=GroupDescription;class PropertyGroupDescription extends GroupDescription{constructor(e,t){super();this._bnd=new Binding(e);this._converter=t}get propertyName(){return this._bnd.path}groupNameFromItem(e,t){return this._converter?this._converter(e,this.propertyName):this._bnd.getValue(e)}namesMatch(e,t){return e===t}}exports.PropertyGroupDescription=PropertyGroupDescription;var Key,DataType,_VERSION="5.20202.724";function getVersion(){return _VERSION}exports.getVersion=getVersion;function setLicenseKey(e){Control._licKey=e}exports.setLicenseKey=setLicenseKey;!function(e){e[e.Back=8]="Back";e[e.Tab=9]="Tab";e[e.Enter=13]="Enter";e[e.Escape=27]="Escape";e[e.Space=32]="Space";e[e.PageUp=33]="PageUp";e[e.PageDown=34]="PageDown";e[e.End=35]="End";e[e.Home=36]="Home";e[e.Left=37]="Left";e[e.Up=38]="Up";e[e.Right=39]="Right";e[e.Down=40]="Down";e[e.Delete=46]="Delete";e[e.F1=112]="F1";e[e.F2=113]="F2";e[e.F3=114]="F3";e[e.F4=115]="F4";e[e.F5=116]="F5";e[e.F6=117]="F6";e[e.F7=118]="F7";e[e.F8=119]="F8";e[e.F9=120]="F9";e[e.F10=121]="F10";e[e.F11=122]="F11";e[e.F12=123]="F12"}(Key=exports.Key||(exports.Key={}));!function(e){e[e.Object=0]="Object";e[e.String=1]="String";e[e.Number=2]="Number";e[e.Boolean=3]="Boolean";e[e.Date=4]="Date";e[e.Array=5]="Array"}(DataType=exports.DataType||(exports.DataType={}));function tryCast(e,t){return null==e?null:isString(t)?isFunction(e.implementsInterface)&&e.implementsInterface(t)?e:null:e instanceof t?e:null}exports.tryCast=tryCast;function isPrimitive(e){return isString(e)||isNumber(e)||isBoolean(e)||isDate(e)}exports.isPrimitive=isPrimitive;function isString(e){return"string"==typeof e}exports.isString=isString;function isNullOrWhiteSpace(e){return!e||!/\S/.test(e)}exports.isNullOrWhiteSpace=isNullOrWhiteSpace;function isNumber(e){return"number"==typeof e}exports.isNumber=isNumber;function isInt(e){return isNumber(e)&&e==Math.round(e)}exports.isInt=isInt;function isBoolean(e){return"boolean"==typeof e}exports.isBoolean=isBoolean;function isFunction(e){return"function"==typeof e}exports.isFunction=isFunction;function isUndefined(e){return void 0===e}exports.isUndefined=isUndefined;function isDate(e){return(e instanceof Date||"[object Date]"===Object.prototype.toString.call(e))&&!isNaN(e.getTime())}exports.isDate=isDate;function isArray(e){return e instanceof Array||Array.isArray(e)||"[object Array]"===Object.prototype.toString.call(e)}exports.isArray=isArray;function isObject(e){return null!=e&&"object"==typeof e&&!isDate(e)&&!isArray(e)}exports.isObject=isObject;function isEmpty(e){for(var t in e)return!1;return!0}exports.isEmpty=isEmpty;function getUniqueId(e){let t=e;for(let s=0;null!=document.getElementById(t);s++)t=e+s;return t}exports.getUniqueId=getUniqueId;function mouseToPage(e){if(e instanceof Point)return e;e&&e.touches&&e.touches.length>0&&(e=e.touches[0]);if(isNumber(e.clientX)&&isNumber(e.clientY))return new Point(e.clientX+pageXOffset,e.clientY+pageYOffset);throw"Mouse or touch event expected."}exports.mouseToPage=mouseToPage;function getType(e){return isNumber(e)?DataType.Number:isBoolean(e)?DataType.Boolean:isDate(e)?DataType.Date:isString(e)?DataType.String:isArray(e)?DataType.Array:DataType.Object}exports.getType=getType;function getTypes(e){let t=[];if(e&&e.length>0){let s=e[0];for(let i in s){let s=null;for(let r=0;r<e.length&&r<1e3&&null==s;r++)if(isPrimitive(s=e[r][i])){let n=Object.getOwnPropertyDescriptor(e[r],i);t.push({binding:i,dataType:getType(s),isReadOnly:n&&!n.writable&&!n.set})}}}return t}exports.getTypes=getTypes;function changeType(e,t,s){if(null!=e){if(isString(e))switch(t){case DataType.Number:let t=Globalize.parseFloat(e,s);return isNaN(t)?e:t;case DataType.Date:let i=Globalize.parseDate(e,s);i||s||!e||(i=new Date(e));return i&&isFinite(i.getTime())?i:e;case DataType.Boolean:switch(e.toLowerCase()){case"true":return!0;case"false":return!1}return e}if(t==DataType.String)return Globalize.format(e,s)}return e}exports.changeType=changeType;function toFixed(e,t,s){if(s){let s=e.toString(),i=s.indexOf(".");if(s.indexOf("e")<0&&i>-1){s=s.substr(0,i+1+t);e=parseFloat(s)}}else{let s=e.toFixed(t);e=parseFloat(s)}return e}exports.toFixed=toFixed;function format(e,t,s){if((e=asString(e)).match(/\{.*"count".*:.*"when".*:.*\}/))try{let s=JSON.parse(e);if(isString(s.count)){let i=t[s.count],r=s.when;if(isNumber(i)&&isObject(r)){let t=r[i]||r.other;isString(t)&&(e=t)}}}catch(e){}return e.replace(/\{(.*?)(:(.*?))?\}/g,(e,i,r,n)=>{let o=e;if(i&&"{"!=i[0]&&t){o=new Binding(i).getValue(t);n&&(o=Globalize.format(o,n));s&&(o=s(t,i,n,o))}return null==o?"":o})}exports.format=format;function glbz(...e){let t=[],s=-1;e[0].forEach((i,r)=>{if(r>0&&r!=s){let n=e[r],o=i.match(/^:([a-z][0-9]*\b)/i)||i.match(/^:'(.+?)'/)||i.match(/^:"(.+?)"/);if(o){n=Globalize.format(n,o[1]);i=i.substr(o[0].length)}else if(":"==i&&r<e.length-1&&(isNumber(n)||isDate(n))){n=Globalize.format(n,e[r+1]);i="";s=r+1}t.push(n)}i&&t.push(i)});return t.join("")}exports.glbz=glbz;function evalTemplate(e,t){if(isIE()){let s=/:\${([^}]*)}/g,i=/\${([^}]*)}(:(([A-Za-z]\d*)|"([^"]+)"|'([^']+)'))?/g;return(e=e.replace(s,(e,s)=>":"+_evalExpression(s,t))).replace(i,(e,s,i,r,n,o,a)=>{let l=_evalExpression(s,t);return r?Globalize.format(l,n||o||a):l})}return _evalExpression(e,t)}exports.evalTemplate=evalTemplate;function _evalExpression(e,t){(t=t||{}).glbz=glbz;let s=Object.keys(t),i=s.map(e=>t[e]);return(isIE()?new Function(...s,"return "+e):new Function(...s,"return glbz`"+e+"`"))(...i)}function clamp(e,t,s){if(null!=e){null!=s&&e>s&&(e=s);null!=t&&e<t&&(e=t)}return e}exports.clamp=clamp;function copy(e,t){if(t)for(let s in t)if("_"!=s[0]){assert(s in e,'Unknown property "'+s+'".');let i=t[s];e._copy&&e._copy(s,i)||(e[s]instanceof Event?isFunction(i)&&e[s].addHandler(i):!isObject(i)||"undefined"!=typeof Element&&i instanceof Element||!e[s]||"itemsSource"==s?e[s]=i:copy(e[s],i))}return e}exports.copy=copy;function assert(e,t){if(!e){t="** Assertion failed in Wijmo: "+t;let e=new Error;isString(e.stack)&&(t+=" "+e.stack);throw t}}exports.assert=assert;function _deprecated(e,t){console.error('** WARNING: "'+e+'" has been deprecated; please use "'+t+'" instead.')}exports._deprecated=_deprecated;function asString(e,t=!0){isUndefined(e)&&(e=null);assert(t&&null==e||isString(e),"String expected.");return e}exports.asString=asString;function asNumber(e,t=!1,s=!1){assert(t&&null==e||isNumber(e),"Number expected.");if(s&&e&&e<0)throw"Positive number expected.";return e}exports.asNumber=asNumber;function asInt(e,t=!1,s=!1){assert(t&&null==e||isInt(e),"Integer expected.");if(s&&e&&e<0)throw"Positive integer expected.";return e}exports.asInt=asInt;function asBoolean(e,t=!1){assert(t&&null==e||isBoolean(e),"Boolean expected.");return e}exports.asBoolean=asBoolean;function asDate(e,t=!1){if(isString(e)){let t=changeType(e,DataType.Date,"r");isDate(t)&&(e=t)}assert(t&&null==e||isDate(e),"Date expected.");return e}exports.asDate=asDate;function asFunction(e,t=!0){assert(t&&null==e||isFunction(e),"Function expected.");return e}exports.asFunction=asFunction;function asArray(e,t=!0){assert(t&&null==e||isArray(e),"Array expected.");return e}exports.asArray=asArray;function asType(e,t,s=!1){e=tryCast(e,t);assert(s||null!=e,t+" expected.");return e}exports.asType=asType;function asEnum(e,t,s=!1){if(null==e&&s)return null;let i=isString(e)?t[e]:e;assert(null!=i,'Invalid enum value: "'+e+'"');return isNumber(i)?i:e}exports.asEnum=asEnum;function asCollectionView(e,t=!0){if(null==e&&t)return null;let s=tryCast(e,"ICollectionView");if(null!=s)return s;isArray(e)||assert(!1,"Array or ICollectionView expected.");return new CollectionView(e)}exports.asCollectionView=asCollectionView;function hasItems(e){return null!=e&&null!=e.items&&e.items.length>0}exports.hasItems=hasItems;function toHeaderCase(e){return e&&e.length?e[0].toUpperCase()+e.substr(1).replace(/([a-z])([A-Z])/g,"$1 $2"):""}exports.toHeaderCase=toHeaderCase;function escapeHtml(e){e&&isString(e)&&(e=e.replace(/[&<>"'\/]/g,e=>_ENTITYMAP[e]));return null!=e?e.toString():""}exports.escapeHtml=escapeHtml;const _ENTITYMAP={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function escapeRegExp(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}exports.escapeRegExp=escapeRegExp;function toPlainText(e){let t=asString(e);if(t&&t.indexOf("<")>-1){_plainText||(_plainText=document.createElement("div"));_plainText.innerHTML=t;t=_plainText.textContent}return t}exports.toPlainText=toPlainText;var _plainText;function hasClass(e,t){if(e&&t){if(e instanceof HTMLElement&&e.classList&&!isIE9())return e.classList.contains(t);if(e.getAttribute){let s=new RegExp("(\\s|^)"+t+"(\\s|$)");return e&&s.test(e.getAttribute("class"))}}return!1}exports.hasClass=hasClass;function addClass(e,t){if(e&&t){if(e instanceof HTMLElement&&e.classList&&!isIE9()){t.indexOf(" ")<0?e.classList.add(t):t.split(" ").forEach(t=>{e.classList.add(t)});return}e.setAttribute&&t.split(" ").forEach(t=>{if(!hasClass(e,t)){let s=e.getAttribute("class");e.setAttribute("class",s?s+" "+t:t)}})}}exports.addClass=addClass;function removeClass(e,t){if(e&&t){if(e instanceof HTMLElement&&e.classList&&!isIE9()){t.indexOf(" ")<0?e.classList.remove(t):t.split(" ").forEach(t=>{e.classList.remove(t)});return}e.setAttribute&&t.split(" ").forEach(t=>{if(hasClass(e,t)){let s=new RegExp("((\\s|^)"+t+"(\\s|$))","g"),i=e.getAttribute("class");(i=i.replace(s," ").replace(/ +/g," ").trim())?e.setAttribute("class",i):e.removeAttribute("class")}})}}exports.removeClass=removeClass;function toggleClass(e,t,s){null==s&&(s=!hasClass(e,t));s?addClass(e,t):removeClass(e,t)}exports.toggleClass=toggleClass;function setAttribute(e,t,s,i){e&&(null!=s?i&&e.getAttribute(t)||e.setAttribute(t,s.toString()):e.removeAttribute(t))}exports.setAttribute=setAttribute;function setChecked(e,t){let s=null==t;e.checked=isIE()?t||s:t;e.indeterminate=s}exports.setChecked=setChecked;function setAriaLabel(e,t){setAttribute(e,"aria-label",t)}exports.setAriaLabel=setAriaLabel;function setSelectionRange(e,t,s=t){assert(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement,"INPUT or TEXTAREA element expected");if(contains(document.body,e)&&!e.disabled&&e.offsetHeight){try{e.setSelectionRange(t,s,"backward")}catch(e){}try{e.focus();return!0}catch(e){}}return!1}exports.setSelectionRange=setSelectionRange;function disableAutoComplete(e){let t="autocomplete",s=e.getAttribute(t);s&&"on"!=s||e.setAttribute(t,"off");"autocorrect,autocapitalize,spellcheck".split(",").forEach(t=>{e.setAttribute(t,"spellcheck"==t?"false":"off")})}exports.disableAutoComplete=disableAutoComplete;function removeChild(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}exports.removeChild=removeChild;function getActiveElement(){let e=document.activeElement;if(e){let t=e.shadowRoot;t&&t.activeElement&&(e=t.activeElement)}return e}exports.getActiveElement=getActiveElement;function moveFocus(e,t){let s=_getFocusableElements(e),i=0;if(t){let e=s.indexOf(getActiveElement());e>-1&&(i=(e+t+s.length)%s.length)}if(i<s.length){let e=s[i];e.focus();e instanceof HTMLInputElement&&e.select();return!0}return!1}exports.moveFocus=moveFocus;function _getFocusableElements(e){let t=[],s=e.querySelectorAll("input,select,textarea,button,a,div");for(let e=0;e<s.length;e++){let i=s[e];if(i.offsetHeight>0&&i.tabIndex>-1&&!i.disabled&&!closest(i,"[disabled],.wj-state-disabled")){if(i instanceof HTMLAnchorElement&&!i.hasAttribute("href"))continue;if(isIE()&&!i.hasAttribute("tabindex")){if(i instanceof HTMLDivElement)continue;let e=Control.getControl(closest(i,".wj-flexgrid"));if(e&&0==e.keyActionTab)continue}!Control.getControl(i)&&_getFocusableElements(i).length||t.push(i)}}return t}function saveFile(e,t,s="text/plain"){(s.match(/\bcsv\b/i)||t.match(/\.csv$/i))&&(e="\ufeff"+e);let i=new Blob([e],{type:s});if(isFunction(navigator.msSaveBlob))navigator.msSaveBlob(i,t);else{let e=URL.createObjectURL(i),s=createElement('<a href="'+e+'" download="'+t+'"></a>',document.body,{display:"none"});s.click();s.remove();URL.revokeObjectURL(e)}}exports.saveFile=saveFile;function getElement(e){if(e instanceof Element)return e;if(isString(e))try{return document.querySelector(e)}catch(e){}return e&&e.jquery?e[0]:null}exports.getElement=getElement;function createElement(e,t,s){e=e.replace(/\bstyle\s*=\s*"/g,'_wj-style="');let i=document.createElement("div");i.innerHTML=e;if(e.indexOf("_wj-style")>-1){let e=i.querySelectorAll("[_wj-style]");for(let t=0;t<e.length;t++){let s=e[t];s.getAttribute("_wj-style").split(";").forEach(e=>{let t=e.split(":");2==t.length&&(s.style[t[0].trim()]=t[1].trim())});s.removeAttribute("_wj-style")}}1==i.children.length&&(i=i.children[0]);s&&setCss(i,s);t&&(t=getElement(t)).appendChild(i);return i}exports.createElement=createElement;function setText(e,t){e.textContent=t||""}exports.setText=setText;function contains(e,t,s){for(let i=t;i&&e;){if(i===e)return!0;i=(s?i[Control._OWNR_KEY]:null)||i.parentNode||i.host}return!1}exports.contains=contains;function closest(e,t){if(e){if(isFunction(e.closest))return e.closest(t);let s=e.matches||e.webkitMatchesSelector||e.msMatchesSelector||e.mozMatchesSelector;if(s)for(;e&&1===e.nodeType;e=e.parentElement||e.parentNode)if(s.call(e,t))return e}return null}exports.closest=closest;function closestClass(e,t){return closest(e,"."+t)}exports.closestClass=closestClass;function enable(e,t){let s=!t,i="disabled";toggleClass(e,"wj-state-disabled",s);setAttribute(e,i,s?i:null);let r=e.querySelectorAll("input,button");for(let e=0;e<r.length;e++)setAttribute(r[e],i,s?i:null)}exports.enable=enable;function getElementRect(e){let t=e.getBoundingClientRect();return new Rect(t.left+pageXOffset,t.top+pageYOffset,t.width,t.height)}exports.getElementRect=getElementRect;function setCss(e,t){assert(isObject(t),"css parameter should be an object");if(e instanceof Array)for(let s=0;s<e.length;s++)setCss(e[s],t);else if(e&&e.style){let s=e.style;for(let e in t){let i=t[e];"number"==typeof i&&e.match(/width|height|left|top|right|bottom|size|padding|margin'/i)&&(i+="px");s[e]!==i&&(s[e]=i)}}}exports.setCss=setCss;function animate(e,t,s){null==t&&(t=Control._ANIM_DEF_DURATION);null==s&&(s=Control._ANIM_DEF_STEP);e=asFunction(e);t=asNumber(t,!1,!0);s=asNumber(s,!1,!0);let i,r=Date.now(),n=setInterval(()=>{let s=Math.min(1,(Date.now()-r)/t);s=Math.sin(s*Math.PI/2);s*=s;i&&cancelAnimationFrame(i);i=requestAnimationFrame(()=>{i=null;e(s)});s>=1&&clearInterval(n)},s);return n}exports.animate=animate;class Point{constructor(e=0,t=0){this.x=asNumber(e);this.y=asNumber(t)}equals(e){return e instanceof Point&&this.x==e.x&&this.y==e.y}clone(){return new Point(this.x,this.y)}}exports.Point=Point;class Size{constructor(e=0,t=0){this.width=asNumber(e);this.height=asNumber(t)}equals(e){return e instanceof Size&&this.width==e.width&&this.height==e.height}clone(){return new Size(this.width,this.height)}}exports.Size=Size;class Rect{constructor(e,t,s,i){this.left=asNumber(e);this.top=asNumber(t);this.width=asNumber(s);this.height=asNumber(i)}get right(){return this.left+this.width}get bottom(){return this.top+this.height}equals(e){return e instanceof Rect&&this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height}clone(){return new Rect(this.left,this.top,this.width,this.height)}static fromBoundingRect(e){if(null!=e.left)return new Rect(e.left,e.top,e.width,e.height);if(null!=e.x)return new Rect(e.x,e.y,e.width,e.height);assert(!1,"Invalid source rectangle.")}static union(e,t){let s=Math.min(e.left,t.left),i=Math.min(e.top,t.top),r=Math.max(e.right,t.right),n=Math.max(e.bottom,t.bottom);return new Rect(s,i,r-s,n-i)}static intersection(e,t){let s=Math.max(e.left,t.left),i=Math.max(e.top,t.top),r=Math.min(e.right,t.right),n=Math.min(e.bottom,t.bottom);return new Rect(s,i,r-s,n-i)}contains(e){if(e instanceof Point)return e.x>=this.left&&e.x<=this.right&&e.y>=this.top&&e.y<=this.bottom;if(e instanceof Rect){let t=e;return t.left>=this.left&&t.right<=this.right&&t.top>=this.top&&t.bottom<=this.bottom}assert(!1,"Point or Rect expected.")}inflate(e,t){return new Rect(this.left-e,this.top-t,this.width+2*e,this.height+2*t)}}exports.Rect=Rect;class DateTime{static addDays(e,t){(e=new Date(e.getTime())).setDate(e.getDate()+t);return e}static addMonths(e,t){(e=new Date(e.getTime())).setMonth(e.getMonth()+t);return e}static addYears(e,t){(e=new Date(e.getTime())).setFullYear(e.getFullYear()+t);return e}static addHours(e,t){(e=new Date(e.getTime())).setHours(e.getHours()+t);return e}static addMinutes(e,t){(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t);return e}static addSeconds(e,t){(e=new Date(e.getTime())).setSeconds(e.getSeconds()+t);return e}static weekFirst(e,t=Globalize.getFirstDayOfWeek()){return DateTime.addDays(e,-(e.getDay()-t))}static weekLast(e,t=Globalize.getFirstDayOfWeek()){e=DateTime.weekFirst(e,t);return DateTime.addDays(e,6)}static monthFirst(e){return DateTime.addDays(e,1-e.getDate())}static monthLast(e){e=DateTime.monthFirst(e);e=DateTime.addMonths(e,1);return DateTime.addDays(e,-1)}static yearFirst(e){return new Date(e.getFullYear(),0,1)}static yearLast(e){return new Date(e.getFullYear(),11,31)}static sameDate(e,t){return isDate(e)&&isDate(t)&&e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()}static sameTime(e,t){return isDate(e)&&isDate(t)&&e.getHours()==t.getHours()&&e.getMinutes()==t.getMinutes()&&e.getSeconds()==t.getSeconds()&&e.getMilliseconds()==t.getMilliseconds()}static equals(e,t){return isDate(e)&&isDate(t)&&e.getTime()==t.getTime()}static fromDateTime(e,t){if(!e&&!t)return null;e||(e=t);t||(t=e);return DateTime.newDate(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}static toFiscal(e,t){let s=exports.culture.Globalize.calendar;return isArray(s.fiscalYearOffsets)?DateTime.addMonths(e,-s.fiscalYearOffsets[t?0:1]):e}static fromFiscal(e,t){let s=exports.culture.Globalize.calendar;return isArray(s.fiscalYearOffsets)?DateTime.addMonths(e,+s.fiscalYearOffsets[t?0:1]):e}static newDate(e,t,s,i,r,n,o){if(null==e||null==t||null==s){let i=new Date;null==e&&(e=i.getFullYear());null==t&&(t=i.getMonth());null==s&&(s=i.getDate())}null==i&&(i=0);null==r&&(r=0);null==n&&(n=0);null==o&&(o=0);let a=new Date(e,t,s,i,r,n,o),l=a.getFullYear();e<100&&l>=1900&&a.setFullYear(a.getFullYear()-1900);return a}static clone(e){return DateTime.fromDateTime(e,e)}}exports.DateTime=DateTime;function httpRequest(e,t){let s=t||{},i=s.method?asString(s.method).toUpperCase():"GET",r=null==s.async||asBoolean(s.async),n=s.data;if(null!=n&&"GET"==i){let t=[];for(let e in n){let s=n[e];isDate(s)&&(s=s.toJSON());t.push(e+"="+encodeURI(s))}if(t.length){let s=e.indexOf("?")<0?"?":"&";e+=s+t.join("&")}n=null}let o=new XMLHttpRequest;o.URL_DEBUG=e;let a=!1;if(null!=n&&!isString(n)){a=isObject(n);n=JSON.stringify(n)}o.onload=function(){if(4==o.readyState){o.status<300?s.success&&asFunction(s.success)(o):s.error&&asFunction(s.error)(o);s.complete&&asFunction(s.complete)(o)}};o.onerror=function(){if(!isFunction(s.error))throw"HttpRequest Error: "+o.status+" "+o.statusText;s.error(o)};o.open(i,e,r,s.user,s.password);s.user&&s.password&&o.setRequestHeader("Authorization","Basic "+btoa(s.user+":"+s.password));a&&o.setRequestHeader("Content-Type","application/json");if(s.requestHeaders)for(let e in s.requestHeaders)o.setRequestHeader(e,s.requestHeaders[e]);isNumber(s.timeout)&&(o.timeout=s.timeout);isFunction(s.beforeSend)&&s.beforeSend(o);o.send(n);return o}exports.httpRequest=httpRequest;let _modules={};function _registerModule(e,t){_modules[e]=t;if("wijmo"===e){let e="undefined"!=typeof window?window:"undefined"!=typeof self?self:null;e&&(e.wijmo=t)}}exports._registerModule=_registerModule;function _getModule(e){return _modules[e]}exports._getModule=_getModule;class PrintDocument{constructor(e){this._copyCss=!0;null!=e&&copy(this,e)}get title(){return this._title}set title(e){this._title=asString(e)}get copyCss(){return this._copyCss}set copyCss(e){this._copyCss=asBoolean(e)}addCSS(e){this._css||(this._css=[]);this._css.push(e)}append(e){let t=this._getDocument();isString(e)?t.write(e):e instanceof HTMLElement?t.write(e.outerHTML):assert(!1,"child should be an HTML element or a string.")}print(e){if(this._iframe){this._close();setTimeout(()=>{let t=this._iframe.contentWindow,s="onafterprint"in t&&!isFirefox();s&&(t.onafterprint=()=>{this._afterPrint(e)});if(!(isIE()&&null==t.document.body)&&document.queryCommandSupported("print"))t.document.execCommand("print",!0,null);else{t.focus();t.print()}s||this._afterPrint(e)},100)}}_afterPrint(e){document.body.removeChild(this._iframe);this._iframe=null;isFunction(e)&&e()}_getDocument(){if(!this._iframe){let e=this._iframe=document.createElement("iframe");addClass(e,"wj-printdocument");setCss(e,{position:"fixed",left:32e3,top:32e3});document.body.appendChild(e)}return this._iframe.contentDocument}_close(){let e=this._getDocument();e.close();e.title=null!=this.title?this.title:document.title;e.title&&e.title.trim()||(e.title=" ");if(this._copyCss){let e=document.head.querySelectorAll("LINK");for(let t=0;t<e.length;t++){let s=e[t];if(s.href.match(/\.css$/i)&&s.rel.match(/stylesheet/i)){let e=httpRequest(s.href,{async:!1});this._addStyle(e.responseText)}}let t=document.head.querySelectorAll("STYLE");for(let e=0;e<t.length;e++)this._addStyle(t[e].textContent)}if(this._css)for(let t=0;t<this._css.length;t++){let s=e.createElement("style"),i=httpRequest(this._css[t],{async:!1});s.textContent=i.responseText;e.head.appendChild(s)}}_addStyle(e){let t=this._getDocument(),s=t.createElement("style");s.textContent=e;t.head.appendChild(s)}}exports.PrintDocument=PrintDocument;class Color{constructor(e){this._r=0;this._g=0;this._b=0;this._a=1;e&&this._parse(e)}get r(){return this._r}set r(e){this._r=clamp(asNumber(e),0,255)}get g(){return this._g}set g(e){this._g=clamp(asNumber(e),0,255)}get b(){return this._b}set b(e){this._b=clamp(asNumber(e),0,255)}get a(){return this._a}set a(e){this._a=clamp(asNumber(e),0,1)}equals(e){return e instanceof Color&&this.r==e.r&&this.g==e.g&&this.b==e.b&&this.a==e.a}toString(){let e=Math.round(100*this.a);return e>99?"#"+((1<<24)+(this.r<<16)+(this.g<<8)+this.b).toString(16).slice(1):"rgba("+this.r+","+this.g+","+this.b+","+e/100+")"}static fromRgba(e,t,s,i=1){let r=new Color(null);r.r=Math.round(clamp(asNumber(e),0,255));r.g=Math.round(clamp(asNumber(t),0,255));r.b=Math.round(clamp(asNumber(s),0,255));r.a=clamp(asNumber(i),0,1);return r}static fromHsb(e,t,s,i=1){let r=Color._hsbToRgb(clamp(asNumber(e),0,1),clamp(asNumber(t),0,1),clamp(asNumber(s),0,1));return Color.fromRgba(r[0],r[1],r[2],i)}static fromHsl(e,t,s,i=1){let r=Color._hslToRgb(clamp(asNumber(e),0,1),clamp(asNumber(t),0,1),clamp(asNumber(s),0,1));return Color.fromRgba(r[0],r[1],r[2],i)}static fromString(e){let t=new Color(null);return t._parse(asString(e))?t:null}getHsb(){return Color._rgbToHsb(this.r,this.g,this.b)}getHsl(){return Color._rgbToHsl(this.r,this.g,this.b)}static interpolate(e,t,s){s=clamp(asNumber(s),0,1);let i=Color._rgbToHsl(e.r,e.g,e.b),r=Color._rgbToHsl(t.r,t.g,t.b),n=1-s,o=e.a*n+t.a*s,a=[i[0]*n+r[0]*s,i[1]*n+r[1]*s,i[2]*n+r[2]*s],l=Color._hslToRgb(a[0],a[1],a[2]);return Color.fromRgba(l[0],l[1],l[2],o)}static toOpaque(e,t){if(1==(e=isString(e)?Color.fromString(e):asType(e,Color)).a)return e;t=null==t?Color.fromRgba(255,255,255,1):isString(t)?Color.fromString(t):asType(t,Color);let s=e.a,i=1-s;return Color.fromRgba(e.r*s+t.r*i,e.g*s+t.g*i,e.b*s+t.b*i)}_parse(e){if("transparent"==(e=e.toLowerCase())){this._r=this._g=this._b=this._a=0;return!0}if(e&&0!=e.indexOf("#")&&0!=e.indexOf("rgb")&&0!=e.indexOf("hsl")){let t=document.createElement("div");t.style.color=e;let s=t.style.color;if(s==e&&!(s=window.getComputedStyle(t).color)){document.body.appendChild(t);s=window.getComputedStyle(t).color;removeChild(t)}e=s.toLowerCase()}if(0==e.indexOf("#")){if(4==e.length){this.r=parseInt(e[1]+e[1],16);this.g=parseInt(e[2]+e[2],16);this.b=parseInt(e[3]+e[3],16);this.a=1;return!0}if(7==e.length){this.r=parseInt(e.substr(1,2),16);this.g=parseInt(e.substr(3,2),16);this.b=parseInt(e.substr(5,2),16);this.a=1;return!0}return!1}if(0==e.indexOf("rgb")){let t=e.indexOf("("),s=e.indexOf(")");if(t>-1&&s>-1){let i=e.substr(t+1,s-(t+1)).split(",");if(i.length>2){this.r=parseInt(i[0]);this.g=parseInt(i[1]);this.b=parseInt(i[2]);this.a=i.length>3?parseFloat(i[3]):1;return!0}}}if(0==e.indexOf("hsl")){let t=e.indexOf("("),s=e.indexOf(")");if(t>-1&&s>-1){let i=e.substr(t+1,s-(t+1)).split(",");if(i.length>2){let e=parseInt(i[0])/360,t=parseInt(i[1]),s=parseInt(i[2]);i[1].indexOf("%")>-1&&(t/=100);i[2].indexOf("%")>-1&&(s/=100);let r=Color._hslToRgb(e,t,s);this.r=r[0];this.g=r[1];this.b=r[2];this.a=i.length>3?parseFloat(i[3]):1;return!0}}}return!1}static _hslToRgb(e,t,s){assert(e>=0&&e<=1&&t>=0&&t<=1&&s>=0&&s<=1,"bad HSL values");let i,r,n;if(0==t)i=r=n=s;else{let o=s<.5?s*(1+t):s+t-s*t,a=2*s-o;i=Color._hue2rgb(a,o,e+1/3);r=Color._hue2rgb(a,o,e);n=Color._hue2rgb(a,o,e-1/3)}return[Math.round(255*i),Math.round(255*r),Math.round(255*n)]}static _hue2rgb(e,t,s){s<0&&(s+=1);s>1&&(s-=1);return s<1/6?e+6*(t-e)*s:s<.5?t:s<2/3?e+(t-e)*(2/3-s)*6:e}static _rgbToHsl(e,t,s){assert(e>=0&&e<=255&&t>=0&&t<=255&&s>=0&&s<=255,"bad RGB values");e/=255,t/=255,s/=255;let i,r,n=Math.max(e,t,s),o=Math.min(e,t,s),a=(n+o)/2;if(n==o)i=r=0;else{let l=n-o;r=a>.5?l/(2-n-o):l/(n+o);switch(n){case e:i=(t-s)/l+(t<s?6:0);break;case t:i=(s-e)/l+2;break;case s:i=(e-t)/l+4}i/=6}return[i,r,a]}static _rgbToHsb(e,t,s){assert(e>=0&&e<=255&&t>=0&&t<=255&&s>=0&&s<=255,"bad RGB values");let i=Color._rgbToHsl(e,t,s);return Color._hslToHsb(i[0],i[1],i[2])}static _hsbToRgb(e,t,s){let i=Color._hsbToHsl(e,t,s);return Color._hslToRgb(i[0],i[1],i[2])}static _hsbToHsl(e,t,s){assert(e>=0&&e<=1&&t>=0&&t<=1&&s>=0&&s<=1,"bad HSB values");let i=clamp(s*(2-t)/2,0,1),r=1-Math.abs(2*i-1),n=clamp(r>0?s*t/r:t,0,1);assert(!isNaN(i)&&!isNaN(n),"bad conversion to HSL");return[e,n,i]}static _hslToHsb(e,t,s){assert(e>=0&&e<=1&&t>=0&&t<=1&&s>=0&&s<=1,"bad HSL values");let i=clamp(1==s?1:(2*s+t*(1-Math.abs(2*s-1)))/2,0,1),r=clamp(i>0?2*(i-s)/i:t,0,1);assert(!isNaN(i)&&!isNaN(r),"bad conversion to HSB");return[e,r,i]}}exports.Color=Color;exports.culture="undefined"!=typeof window&&window.wijmo&&window.wijmo.culture||{Globalize:{numberFormat:{".":".",",":",","-":"-","+":"+","%":"%",percent:{pattern:["-n %","n %"]},currency:{decimals:2,symbol:"$",pattern:["($n)","$n"]}},calendar:{"/":"/",":":":",firstDay:0,days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],am:["AM","A"],pm:["PM","P"],eras:["A.D.","B.C."],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",t:"h:mm tt",T:"h:mm:ss tt",M:"MMMM d",m:"MMMM d",Y:"MMMM, yyyy",y:"MMMM, yyyy",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",s:'yyyy"-"MM"-"dd"T"HH":"mm":"ss',o:'yyyy"-"MM"-"dd"T"HH":"mm":"ss"."fffffffK',O:'yyyy"-"MM"-"dd"T"HH":"mm":"ss"."fffffffK',U:"dddd, MMMM dd, yyyy h:mm:ss tt"},fiscalYearOffsets:[-3,-3]}}};class Globalize{static format(e,t,s,i){if(isString(e))return e;if(isNumber(e)){t=t||(e==Math.round(e)?"n0":"n2");return Globalize.formatNumber(e,t,s,i)}if(isDate(e)){t=t||"d";return Globalize.formatDate(e,t)}return null!=e?e.toString():""}static formatNumber(e,t,s,i){e=asNumber(e);t=asString(t);let r,n=exports.culture.Globalize.numberFormat,o=Globalize._parseNumericFormat(t),a=o.spec,l=o.prec,h=n["."]||".",c=n[","]||",",u=n["-"]||"-";null==l&&(l="c"==a?n.currency.decimals:"e"==a?6:"r"==a?12:e==Math.round(e)?0:2);o.scale&&(e/=Math.pow(10,o.scale));if("d"==a||"x"==a){r=Math.round(Math.abs(e)).toString("d"==a?10:16);for(;r.length<l;)r="0"+r;e<0&&(r=u+r);return"X"==o.specRaw?r.toUpperCase():r}"p"==a&&(e=toFixed(e=Globalize._shiftDecimal(e,2),l,i));i&&"p"!=a&&"e"!=a&&(e=toFixed(e,l,!0));switch(a){case"e":r=e.toExponential(l);"E"==o.specRaw&&(r=r.replace("e","E"));break;case"c":case"p":r=Globalize._toFixedStr(Math.abs(e),l);break;default:r=Globalize._toFixedStr(e,l)}(s||"g"==a||"r"==a)&&r.indexOf(".")>-1&&(r=r.replace(/(\.\d*?)0+$/g,"$1").replace(/\.$/,""));"."!=h&&(r=r.replace(".",h));"-"!=u&&(r=r.replace("-",u));if(c&&("n"==a||"c"==a||"p"==a||"F"==o.specRaw||"G"==o.specRaw)){let e=r.indexOf(h),t=/\B(?=(\d\d\d)+(?!\d))/g;r=e>-1?r.substr(0,e).replace(t,c)+r.substr(e):r.replace(t,c)}if("c"==a){let t=n.currency.pattern[e<0?0:1],s=o.curr||n.currency.symbol;"​"==s&&(s="");r=t.replace("n",r).replace("$",s)}if("p"==a){let t=n.percent.pattern[e<0?0:1],s=n["%"]||"%";r=t.replace("n",r);"%"!=s&&(r=r.replace("%",s));"-"!=u&&e<0&&(r=r.replace("-",u))}return o.prefix||o.suffix?o.prefix+r+o.suffix:r}static formatDate(e,t){e=asDate(e);switch(t){case"r":case"R":return e.toUTCString();case"u":return e.toISOString().replace(/\.\d{3}/,"")}t=Globalize._expandFormat(t);return Globalize._parseDateFormat(t).map(s=>Globalize._formatDatePart(e,t,s)).join("")}static parseInt(e,t){return Math.round(Globalize.parseFloat(e,t))}static parseFloat(e,t){let s=Globalize._parseNumericFormat(t),i=s.prefix;i&&0==e.indexOf(i)&&(e=e.substring(i.length));let r=s.suffix;r&&e.lastIndexOf(r)==e.length-r.length&&(e=e.substring(0,e.length-r.length));let n=exports.culture.Globalize.numberFormat,o=n["."]||".",a=n[","]||",",l=n["-"]||"-",h=n["%"]||"%",c=s.curr||n.currency.symbol||"$",u=e.indexOf(h)>-1,d=e.indexOf("(")>-1&&e.indexOf(")")>-1,p=0;if("x"==s.spec)p=parseInt(e,16);else{[c,h,"(",")"].forEach(t=>{e=e.replace(t,"")});/\s/.test(a)&&(e=e.replace(/\s+/g,""));let t=(e=e.replace(new RegExp("\\"+a,"g"),"").replace(new RegExp("\\"+l,"g"),"-").replace(/(\+|\-)\s+/g,"$1").replace(o,".").trim()).length;if(!d&&t&&"-"==e[t-1]){d=!0;e=e.substring(0,t-1)}p=/^\s*(\+|\-)?\d*(\.\d*)?(\s*E(\+|\-)?\d+)?\s*$/i.test(e)?parseFloat(e):Number.NaN}if(!isNaN(p)){d=d||p<0;p=Math.abs(p);u&&(p=Globalize._shiftDecimal(p,-2));d&&(p=-p);s.scale&&(p*=Math.pow(10,s.scale))}return p}static parseDate(e,t,s){if(!(e=asString(e)))return null;if("u"==t)return new Date(e);let i;if("R"==t||"r"==t){let t=/((\d+)\-(\d+)\-(\d+))?\s?((\d+):(\d+)(:(\d+))?)?/,s=e.match(t);if(s[1]||s[5]){i=s[1]?new Date(parseInt(s[2]),parseInt(s[3])-1,parseInt(s[4])):new Date;if(s[5]){i.setHours(parseInt(s[6]));i.setMinutes(parseInt(s[7]));i.setSeconds(s[8]?parseInt(s[9]):0)}}else i=new Date(e);return isNaN(i.getTime())?null:i}t=Globalize._expandFormat(t||"d");let r,n,o,a,l,h=exports.culture.Globalize.calendar,c=Globalize._CJK,u=new RegExp("(\\"+h["/"]+")|(\\"+h[":"]+")|(\\d+)|(["+c+"\\.]{2,})|(["+c+"]+)","gi"),d=e.match(u),p=Globalize._parseDateFormat(t),g=0,f=-1,_=0,m=1,C=0,b=0,y=0,w=0,v=-1,x=-1;if(!(d&&d.length&&p&&p.length))return null;for(let e=0;e<p.length&&d;e++){let t=e-g,s=t>-1&&t<d.length?d[t]:"",i=p[e].length;switch(p[e]){case"EEEE":case"EEE":case"EE":case"E":case"eeee":case"eee":case"ee":case"e":l=p[e];case"yyyy":case"yyy":case"yy":case"y":if(i>1&&s.length>i){d[t]=s.substr(i);s=s.substr(0,i);g++}f=parseInt(s);a=4==s.length;break;case"MMMM":case"MMM":o=!0;let c=s.toLowerCase();_=-1;for(let e=0;e<12;e++)if(0==h.months[e].toLowerCase().indexOf(c)){_=e;break}if(_>-1)break;case"MM":case"M":o=!0;if(i>1&&s.length>i){d[t]=s.substr(i);s=s.substr(0,i);g++}_=parseInt(s)-1;break;case"dddd":case"ddd":r=!0;break;case"dd":case"d":if(i>1&&s.length>i){d[t]=s.substr(i);s=s.substr(0,i);g++}m=parseInt(s);n=!0;break;case"hh":case"h":if(i>1&&s.length>i){d[t]=s.substr(i);s=s.substr(0,i);g++}C=12==(C=parseInt(s))?0:C;break;case"HH":if(i>1&&s.length>i){d[t]=s.substr(i);s=s.substr(0,i);g++}C=parseInt(s);break;case"H":C=parseInt(s);break;case"mm":case"m":if(i>1&&s.length>i){d[t]=s.substr(i);s=s.substr(0,i);g++}b=parseInt(s);break;case"ss":case"s":if(i>1&&s.length>i){d[t]=s.substr(i);s=s.substr(0,i);g++}y=parseInt(s);break;case"fffffff":case"FFFFFFF":case"ffffff":case"FFFFFF":case"fffff":case"FFFFF":case"ffff":case"FFFF":case"fff":case"FFF":case"ff":case"FF":case"f":case"F":w=parseInt(s)/Math.pow(10,i-3);break;case"tt":case"t":s=s.toUpperCase();C<12&&h.pm.indexOf(s)>-1&&(C+=12);break;case"q":case"Q":case"u":case"U":x=this.parseInt(s);break;case"ggg":case"gg":case"g":v=h.eras.length>1?Globalize._getEra(s,h):-1;break;case"/":case":":if(s&&s!=h[p[e]])return null;break;case h["/"]:case h[":"]:if(s&&s!=p[e])return null;break;case"K":break;default:Globalize._unquote(p[e]).trim()!=s.trim()&&g++}}if(o&&n){isNaN(C)&&(C=0);isNaN(b)&&(b=0);isNaN(y)&&(y=0)}if(_<0||_>11||isNaN(_)||m<1||m>31||isNaN(m)||C<0||C>=24||isNaN(C)||b<0||b>=60||isNaN(b)||y<0||y>=60||isNaN(y))return null;if(l){if(!o)return null;let e=exports.culture.Globalize.calendar;if(isArray(e.fiscalYearOffsets)){let t="E"==l[0],s=_-e.fiscalYearOffsets[t?0:1];f+=s>11?-1:s<0?1:0}}if(r&&!n)return null;!o&&x>=1&&x<=4&&(_=3*(x-1));if(isNaN(f)||f<0)f=isDate(s)?s.getFullYear():(new Date).getFullYear();else if(v>-1)f=f+h.eras[v].start.getFullYear()-1;else if(f<100&&!a){let e=isNumber(h.twoDigitYearMax)?h.twoDigitYearMax:2029;e>99&&(f+=f+2e3<=e?2e3:1900)}return(i=DateTime.newDate(f,_,m,C,b+0,y,w)).getMonth()!=_||i.getDate()!=m?null:isNaN(i.getTime())?null:i}static getFirstDayOfWeek(){let e=exports.culture.Globalize.calendar.firstDay;return e||0}static getNumberDecimalSeparator(){let e=exports.culture.Globalize.numberFormat["."];return e||"."}static _toFixedStr(e,t){let s=e.toString(),i=s.indexOf("."),r=t-(s.length-i)+1,n=s.indexOf("e")>-1;if(!n&&i>-1&&r>=0)return s+Array(r+1).join("0");if(i>-1&&!n&&"5"==s[s.length-1]){e=+(Math.round(+(Math.abs(e)+"e"+t))+"e"+-t)*(e<0?-1:1)}return e.toFixed(t)}static _unquote(e){return e.length>1&&e[0]==e[e.length-1]&&("'"==e[0]||'"'==e[0])?e.substr(1,e.length-2):e}static _parseNumericFormat(e){let t=Globalize._numFormatInfo[e];if(!t){exports.culture.Globalize.numberFormat;let s=e&&e.match(/(\"(.*?)\"\s*)?([a-z])\s*(\d*)\s*(,*)(\s*\"(.*?)\"\s*)?(.*)/i)||[],i=s[3]?s[3]:"n";t={prefix:s[2]||"",spec:i.toLowerCase(),specRaw:i,prec:s[4]?parseInt(s[4]):null,scale:s[5]?3*s[5].length:0,suffix:s[7]||"",curr:s[8]||null};Globalize._numFormatInfo[e]=t}return t}static _parseDateFormat(e){let t=Globalize._dateFormatParts[e];if(!t){t=[];if(e){let s,i;for(s=0;s>-1&&s<e.length;s++){let r=e[s];if(("'"==r||'"'==r)&&(i=e.indexOf(r,s+1))>-1){t.push(e.substring(s,i+1));s=i}else if("\\"==r&&s<e.length-1){s++;t.push('"'+e[s]+'"')}else{i=s+1;for(;i<e.length&&e[i]==r;i++);t.push(e.substring(s,i));s=i-1}}}Globalize._dateFormatParts[e]=t}return t}static _formatDatePart(e,t,s){let i,r=exports.culture.Globalize.calendar,n=0,o=0,a=0,l=s.length;switch(s){case"yyyy":case"yyy":case"yy":case"y":case"EEEE":case"EEE":case"EE":case"E":case"eeee":case"eee":case"ee":case"e":o=(i="E"==s[0]?DateTime.toFiscal(e,!0):"e"==s[0]?DateTime.toFiscal(e,!1):e).getFullYear();if(r.eras.length>1&&t.indexOf("g")>-1&&(n=Globalize._getEra(e,r))>-1){let e=r.eras[n];o=isDate(e.start)?o-e.start.getFullYear()+1:Math.abs(o)}let h=s.length<3?o%100:3==s.length?o%1e3:o;return Globalize._zeroPad(h,s.length);case"MMMMM":return r.monthsAbbr[e.getMonth()][0];case"MMMM":return r.months[e.getMonth()];case"MMM":return r.monthsAbbr[e.getMonth()];case"MM":case"M":return Globalize._zeroPad(e.getMonth()+1,l);case"dddd":return r.days[e.getDay()];case"ddd":return r.daysAbbr[e.getDay()];case"dd":return Globalize._zeroPad(e.getDate(),2);case"d":return e.getDate().toString();case"hh":case"h":return Globalize._zeroPad(Globalize._h12(e),l);case"HH":case"H":return Globalize._zeroPad(e.getHours(),l);case"mm":case"m":return Globalize._zeroPad(e.getMinutes(),l);case"ss":case"s":return Globalize._zeroPad(e.getSeconds(),l);case"fffffff":case"FFFFFFF":case"ffffff":case"FFFFFF":case"fffff":case"FFFFF":case"ffff":case"FFFF":case"fff":case"FFF":case"ff":case"FF":case"f":case"F":a=e.getMilliseconds()*Math.pow(10,l-3);return"f"==s[0]?Globalize._zeroPad(a,l):a.toFixed(0);case"tt":return e.getHours()<12?r.am[0]:r.pm[0];case"t":return e.getHours()<12?r.am[1]:r.pm[1];case"q":case"Q":return(Math.floor(e.getMonth()/3)+1).toString();case"u":case"U":i=DateTime.toFiscal(e,"U"==s);return(Math.floor(i.getMonth()/3)+1).toString();case"ggg":case"gg":case"g":if(r.eras.length>1&&(n=Globalize._getEra(e,r))>-1){let e=r.eras[n];if(isString(e))return e;switch(s){case"gg":return e.name[0];case"g":return e.symbol;default:return e.name}}return r.eras[0];case":":case"/":return r[s];case"K":let c=e.toString().match(/(\+|\-)(\d{2})(\d{2})/);return c?c[1]+c[2]+c[3]:"";case"zzz":case"zz":case"z":let u,d=-e.getTimezoneOffset();switch(s){case"zzz":u=Globalize.format(d/60,"d2",!1,!0)+r[":"]+Globalize.format(d%60,"d2",!1,!0);break;case"zz":u=Globalize.format(d/60,"d2",!1,!0);break;case"z":u=Globalize.format(d/60,"d1",!1,!0)}return d>=0?"+"+u:u}return l>1&&s[0]==s[l-1]&&('"'==s[0]||"'"==s[0])?s.substr(1,l-2):s}static _getEra(e,t){if(t.eras){let s=t.eras.length;if(isDate(e)){if(isString(t.eras[0]))return e.getFullYear()>=0?0:1;if(isDate(t.eras[0].start)){for(let i=0;i<s;i++)if(e>=t.eras[i].start)return i;return s-1}}else if(isString(e)&&e.length>0){e=e.toLowerCase();for(let i=0;i<s;i++){let s=t.eras[i],r=s.name,n=s.symbol;if(r&&0==r.toLowerCase().indexOf(e)||n&&0==n.toLowerCase().indexOf(e))return i}}}return-1}static _expandFormat(e){let t=exports.culture.Globalize.calendar.patterns[e];return t||e}static _zeroPad(e,t){let s=e.toFixed(0),i=t-s.length+1;return i>0?Array(i).join("0")+s:s}static _h12(e){let t=exports.culture.Globalize.calendar,s=e.getHours();t.am&&t.am[0]&&0==(s%=12)&&(s=12);return s}static _shiftDecimal(e,t){if(0==t||isNaN(e))return e;let s=e.toString();if(s.indexOf("e")>-1)return e*Math.pow(10,t);let i=Array(Math.abs(t)+1).join("0");t<0&&(s=i+s);var r=s.indexOf(".");r<0&&(r=(s+=".").indexOf("."));t>0&&(s+=i);r+=t;s=(s=s.replace(".","")).substr(0,r)+"."+s.substr(r);return parseFloat(s)}}Globalize._CJK="a-z"+"u00c0-u017fu3000-u30ffu4e00-u9faf".replace(/u/g,"\\u")+"u1100-u11ffu3130-u318fua960-ua97fuac00-ud7afud7b0-ud7ff".replace(/u/g,"\\u");Globalize._numFormatInfo={};Globalize._dateFormatParts={};exports.Globalize=Globalize;function _updateCulture(e){exports.culture=e}exports._updateCulture=_updateCulture;function _addCultureInfo(e,t){exports.culture[e]="undefined"!=typeof window&&window.wijmo.culture[e]||t}exports._addCultureInfo=_addCultureInfo;class _MaskProvider{constructor(e,t=null,s="_"){this._promptChar="_";this._mskArr=[];this._full=!0;this._inputBnd=this._input.bind(this);this._keydownBnd=this._keydown.bind(this);this._keypressBnd=this._keypress.bind(this);this._cmpstartBnd=this._cmpstart.bind(this);this._cmpendBnd=this._cmpend.bind(this);this.mask=asString(t);this.input=e;this.promptChar=asString(s,!1);this._connect(!0);this._evtInput=document.createEvent("HTMLEvents");this._evtInput.initEvent("input",!0,!1)}get input(){return this._tbx}set input(e){this._connect(!1);this._tbx=e;this._connect(!0)}get mask(){return this._msk}set mask(e){if(e!=this._msk){this._msk=asString(e,!0);this._parseMask();this._valueChanged()}}get promptChar(){return this._promptChar}set promptChar(e){if(e!=this._promptChar){this._promptChar=asString(e,!1);assert(1==this._promptChar.length,"promptChar must be a string with length 1.");this._valueChanged()}}get maskFull(){return this._full}getMaskRange(){return this._mskArr.length?[this._firstPos,this._lastPos]:[0,this._tbx.value.length-1]}getRawValue(){let e=this._tbx?this._tbx.value:"";if(!this.mask)return e;let t="";for(let s=0;s<this._mskArr.length&&s<e.length;s++)this._mskArr[s].literal||e[s]==this._promptChar||(t+=e[s]);return t}refresh(){this._parseMask();this._valueChanged()}_input(e){if(this._msk&&!this._composing&&e!=this._evtInput){e.preventDefault();e.stopImmediatePropagation();setTimeout(()=>{this._valueChanged();this._tbx&&this._tbx.dispatchEvent(this._evtInput)})}}_keydown(e){if(e.keyCode==Key.Back){let t=this._tbx.selectionStart,s=this._tbx.selectionEnd;if(t<=this._firstPos&&s==t){e.preventDefault();this._backSpace=!1;return}}this._backSpace=e.keyCode==Key.Back}_keypress(e){e.ctrlKey||e.metaKey||e.altKey||this._composing||!this._preventKey(e.charCode)||e.preventDefault()}_cmpstart(e){this._composing=!0}_cmpend(e){if(this._composing){this._composing=!1;setTimeout(()=>{let e=this._tbx;e&&this._valueChanged()&&e.dispatchEvent(this._evtInput)})}}_preventKey(e){if(e&&this._mskArr.length){let t=this._tbx,s=t.selectionStart,i=String.fromCharCode(e);s<this._firstPos&&setSelectionRange(t,s=this._firstPos);if(s>=this._mskArr.length)return!0;let r=this._mskArr[s];if(r.literal)this._validatePosition(s);else if(r.wildCard!=i&&!this._isCharValid(r.wildCard,i))return!0}return!1}_connect(e){let t=this._tbx;if(t){assert(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement,"INPUT or TEXTAREA element expected.");if(e){this._autoComplete=t.autocomplete;this._spellCheck=t.spellcheck;t.autocomplete="off";t.spellcheck=!1;t.addEventListener("input",this._inputBnd,!0);t.addEventListener("keydown",this._keydownBnd,!0);t.addEventListener("keypress",this._keypressBnd,!0);t.addEventListener("compositionstart",this._cmpstartBnd,!0);t.addEventListener("compositionend",this._cmpendBnd,!0);t.addEventListener("blur",this._cmpendBnd,!0);this._valueChanged()}else{t.autocomplete=this._autoComplete;t.spellcheck=this._spellCheck;t.removeEventListener("input",this._inputBnd,!0);t.removeEventListener("keydown",this._keydownBnd,!0);t.removeEventListener("keypress",this._keypressBnd,!0);t.removeEventListener("compositionstart",this._cmpstartBnd,!0);t.removeEventListener("compositionend",this._cmpendBnd,!0);t.removeEventListener("blur",this._cmpendBnd,!0)}}}_valueChanged(){if(!this._tbx||!this._msk)return!1;let e=this._tbx,t=e.value.length<2,s=e.selectionStart,i=s>0?e.value[s-1]:"",r=e.value;e.value=this._applyMask();t&&(s=this._firstPos+1);let n=s>0?e.value[s-1]:"";s>0&&n==this._promptChar&&i!=this.promptChar&&s--;s==r.length&&(s=this._matchEnd);this._validatePosition(s);return r!=e.value}_applyMask(){this._full=!0;this._matchEnd=0;let e=this._tbx.value;if(!this._msk)return e;if(!e&&!this._tbx.required)return e;let t="",s=0,i=this._promptChar;e=this._handleVagueLiterals(e);for(let r=0;r<this._mskArr.length;r++){let n=this._mskArr[r],o=n.literal;o&&o==e[s]&&s++;if(n.wildCard){o=i;if(e){let r=s;for(;r<e.length;r++)if(this._isCharValid(n.wildCard,e[r])){o=e[r];switch(n.charCase){case">":o=o.toUpperCase();break;case"<":o=o.toLowerCase()}o!=i&&(this._matchEnd=t.length+1);break}s=r+1}o==i&&(this._full=!1)}t+=o}return t}_handleVagueLiterals(e){if(e.length>this._mskArr.length+1)return e;let t=e.length-this._mskArr.length;if(0!=t&&e.length>1){let s=-1,i=this._tbx,r=i==getActiveElement()?i.selectionStart:i.value.length;for(let e=Math.max(0,r-t);e<this._mskArr.length;e++)if(this._mskArr[e].vague){s=e;break}if(s>-1)if(t<0){let i=Array(1-t).join(this._promptChar),r=s+t;r>-1&&(e=e.substr(0,r)+i+e.substr(r))}else{for(;s>0&&this._mskArr[s-1].literal;)s--;e=e.substr(0,s)+e.substr(s+t)}}return e}_isCharValid(e,t){if(t==this._promptChar)return!0;switch(e){case"0":return this._isDigit(t);case"9":return this._isDigit(t)||" "==t;case"#":return this._isDigit(t)||" "==t||"+"==t||"-"==t;case"L":return this._isLetter(t);case"l":return this._isLetter(t)||" "==t;case"A":return this._isDigit(t)||this._isLetter(t);case"a":return this._isDigit(t)||this._isLetter(t)||" "==t;case"９":return t>="０"&&t<="９";case"Ｊ":case"Ｇ":return!("Ｇ"==e&&_MaskProvider._X_DBCS_BIG_HIRA.indexOf(t)>-1)&&(t>="ぁ"&&t<="ゟ");case"Ｋ":case"Ｎ":return!("Ｎ"==e&&_MaskProvider._X_DBCS_BIG_KATA.indexOf(t)>-1)&&(t>="゠"&&t<="ヿ");case"Ｚ":return!(t>="ｦ"&&t<="ﾟ")&&(t<="!"||t>="ÿ");case"H":return t>="!"&&t<="ÿ"||t>="ｦ"&&t<="ﾟ";case"K":case"N":return!("N"==e&&_MaskProvider._X_SBCS_BIG_KATA.indexOf(t)>-1)&&(t>="ｦ"&&t<="ﾟ")}return!1}_isDigit(e){return e>="0"&&e<="9"}_isLetter(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}_validatePosition(e){let t=this._mskArr;if(this._backSpace)for(;e>0&&e<t.length&&t[e-1].literal;)e--;if(0==e||!this._backSpace)for(;e<t.length&&t[e].literal;)e++;getActiveElement()==this._tbx&&setSelectionRange(this._tbx,e);this._backSpace=!1}_parseMask(){this._mskArr=[];this._firstPos=-1;this._lastPos=-1;let e,t=this._msk,s="|";for(let i=0;t&&i<t.length;i++)switch(t[i]){case"0":case"9":case"#":case"A":case"a":case"L":case"l":case"９":case"Ｊ":case"Ｇ":case"Ｋ":case"Ｎ":case"Ｚ":case"K":case"N":case"H":this._firstPos<0&&(this._firstPos=this._mskArr.length);this._lastPos=this._mskArr.length;this._mskArr.push(new _MaskElement(t[i],s));break;case".":case",":case":":case"/":case"$":switch(t[i]){case".":case",":e=exports.culture.Globalize.numberFormat[t[i]];break;case":":case"/":e=exports.culture.Globalize.calendar[t[i]];break;case"$":e=exports.culture.Globalize.numberFormat.currency.symbol}for(let t=0;t<e.length;t++)this._mskArr.push(new _MaskElement(e[t]));break;case"<":case">":case"|":s=t[i];break;case"\\":i<t.length-1&&i++;this._mskArr.push(new _MaskElement(t[i]));break;default:this._mskArr.push(new _MaskElement(t[i]))}for(let e=0;e<this._mskArr.length;e++){let t=this._mskArr[e];if(t.literal)for(let s=0;s<e;s++){let e=this._mskArr[s];if(e.wildCard&&this._isCharValid(e.wildCard,t.literal)){t.vague=!0;break}}}}}_MaskProvider._X_DBCS_BIG_HIRA="ぁぃぅぇぉっゃゅょゎゕゖ";_MaskProvider._X_DBCS_BIG_KATA="ァィゥェォッャュョヮヵヶ";_MaskProvider._X_SBCS_BIG_KATA="ｧｨｩｪｫｬｭｮｯ";exports._MaskProvider=_MaskProvider;class _MaskElement{constructor(e,t){if(t){this.wildCard=e;this.charCase=t}else this.literal=e}}exports._MaskElement=_MaskElement;var Aggregate;!function(e){e[e.None=0]="None";e[e.Sum=1]="Sum";e[e.Cnt=2]="Cnt";e[e.Avg=3]="Avg";e[e.Max=4]="Max";e[e.Min=5]="Min";e[e.Rng=6]="Rng";e[e.Std=7]="Std";e[e.Var=8]="Var";e[e.StdPop=9]="StdPop";e[e.VarPop=10]="VarPop";e[e.CntAll=11]="CntAll";e[e.First=12]="First";e[e.Last=13]="Last"}(Aggregate=exports.Aggregate||(exports.Aggregate={}));function getAggregate(e,t,s){let i=0,r=0,n=0,o=0,a=null,l=null,h=null,c=s?new Binding(s):null;if((e=asEnum(e,Aggregate))==Aggregate.CntAll)return t.length;for(let s=0;s<t.length;s++){let u=t[s];c&&(u=c.getValue(u));if(e==Aggregate.First)return u;if(null!=u){i++;(null==a||u<a)&&(a=u);(null==l||u>l)&&(l=u);h=u;if(isNumber(u)&&!isNaN(u)){r++;n+=u;o+=u*u}else if(isBoolean(u)){r++;if(1==u){n++;o++}}}}let u=0==r?0:n/r;switch(e){case Aggregate.Avg:return u;case Aggregate.Cnt:return i;case Aggregate.Max:return l;case Aggregate.Min:return a;case Aggregate.Rng:return l-a;case Aggregate.Sum:return n;case Aggregate.VarPop:return r<=1?0:o/r-u*u;case Aggregate.StdPop:return r<=1?0:Math.sqrt(o/r-u*u);case Aggregate.Var:return r<=1?0:(o/r-u*u)*r/(r-1);case Aggregate.Std:return r<=1?0:Math.sqrt((o/r-u*u)*r/(r-1));case Aggregate.Last:return h}throw"Invalid aggregate type."}exports.getAggregate=getAggregate;class ArrayBase extends Array{constructor(){canChangePrototype?this.length=0:super()}}exports.ArrayBase=ArrayBase;var canChangePrototype=!0;try{ArrayBase.prototype=Array.prototype;canChangePrototype=ArrayBase.prototype===Array.prototype}catch(e){canChangePrototype=!1}var SortNulls,symb="undefined"!=typeof window?window.Symbol:null;!canChangePrototype&&symb&&symb.species&&Object.defineProperty(ArrayBase,symb.species,{get:function(){return Array},enumerable:!1,configurable:!1});class ObservableArray extends ArrayBase{constructor(e){super();this._updating=0;this.collectionChanged=new Event;if(e){e=asArray(e);this._updating++;for(let t=0;t<e.length;t++)this.push(e[t]);this._updating--}}push(...e){let t=this.length;for(let s=0;s<e.length;s++){t=super.push(e[s]);this._updating||this._raiseCollectionChanged(NotifyCollectionChangedAction.Add,e[s],t-1)}return t}pop(){let e=super.pop();this._raiseCollectionChanged(NotifyCollectionChangedAction.Remove,e,this.length);return e}splice(e,t,...s){let i,r=NotifyCollectionChangedAction,n=this._raiseCollectionChanged.bind(this);if(t&&s.length){i=super.splice(e,t,...s);1==t&&1==s.length?n(r.Change,s[0],e):n()}else if(s.length){i=super.splice(e,0,...s);1==s.length?n(r.Add,s[0],e):n()}else{i=super.splice(e,t);1==t?n(r.Remove,i[0],e):n()}return i}slice(e,t){return super.slice(e,t)}indexOf(e,t){return super.indexOf(e,t)}sort(e){let t=super.sort(e);this._raiseCollectionChanged();return t}insert(e,t){this.splice(e,0,t)}remove(e){let t=this.indexOf(e);t>-1&&this.removeAt(t);return t>-1}removeAt(e){this.splice(e,1)}setAt(e,t){e>=this.length&&(this.length=e+1);this.splice(e,1,t)}clear(){this.length&&this.splice(0,this.length)}beginUpdate(){this._updating++}endUpdate(){this._updating--;this._updating<=0&&this._raiseCollectionChanged()}get isUpdating(){return this._updating>0}deferUpdate(e){try{this.beginUpdate();e()}finally{this.endUpdate()}}implementsInterface(e){return"INotifyCollectionChanged"==e}onCollectionChanged(e=NotifyCollectionChangedEventArgs.reset){this.isUpdating||this.collectionChanged.raise(this,e)}_raiseCollectionChanged(e=NotifyCollectionChangedAction.Reset,t,s){if(!this.isUpdating){let i=new NotifyCollectionChangedEventArgs(e,t,s);this.onCollectionChanged(i)}}}exports.ObservableArray=ObservableArray;!function(e){e[e.Natural=0]="Natural";e[e.First=1]="First";e[e.Last=2]="Last"}(SortNulls=exports.SortNulls||(exports.SortNulls={}));class CollectionView{constructor(e,t){this._idx=-1;this._filters=new ObservableArray;this._srtDsc=new ObservableArray;this._grpDesc=new ObservableArray;this._newItem=null;this._edtItem=null;this._pgSz=0;this._pgIdx=0;this._updating=0;this._stableSort=!1;this._srtNulls=SortNulls.Last;this._canFilter=!0;this._canGroup=!0;this._canSort=!0;this._canAddNew=!0;this._canCancelEdit=!0;this._canRemove=!0;this._canChangePage=!0;this._refreshOnEdit=!0;this._trackChanges=!1;this._chgAdded=new ObservableArray;this._chgRemoved=new ObservableArray;this._chgEdited=new ObservableArray;this.collectionChanged=new Event;this.sourceCollectionChanging=new Event;this.sourceCollectionChanged=new Event;this.currentChanged=new Event;this.currentChanging=new Event;this.pageChanged=new Event;this.pageChanging=new Event;this._srtDsc.collectionChanged.addHandler(()=>{this._srtDsc.forEach(e=>{assert(e instanceof SortDescription,"sortDescriptions array must contain SortDescription objects.")});this.canSort&&this._commitAndRefresh()});this._grpDesc.collectionChanged.addHandler(()=>{this._grpDesc.forEach(e=>{assert(e instanceof GroupDescription,"groupDescriptions array must contain GroupDescription objects.")});this.canGroup&&this._commitAndRefresh()});this._filters.collectionChanged.addHandler(()=>{this._filters.forEach(e=>{assert(isFunction(e),"filters array must contain IPredicate functions.")});this.canFilter&&this._commitAndRefresh()});this.sourceCollection=e||new ObservableArray;t&&this.deferUpdate(()=>{copy(this,t)});null==this._keepCurrentItem&&(this._keepCurrentItem=!0)}_copy(e,t){switch(e){case"sortDescriptions":let e=this.sortDescriptions;e.deferUpdate(()=>{e.clear();asArray(t).forEach(t=>{isString(t)?t=new SortDescription(t,!0):t instanceof SortDescription||!t.property||(t=new SortDescription(t.property,t.ascending));e.push(t)})});return!0;case"groupDescriptions":let s=this.groupDescriptions;s.deferUpdate(()=>{s.clear();t.forEach(e=>{isString(e)&&(e=new PropertyGroupDescription(e));s.push(e)})});return!0;case"currentItem":this.currentItem=t;return!0}return!1}get calculatedFields(){return this._calcFields}set calculatedFields(e){if(e&&!window.Proxy){console.warn("** Calculated fields require Proxy (see https://www.npmjs.com/package/proxy-polyfill).");e=null}if(e!=this._calcFields){this._calcFields=e;let t=this._srcRaw;this._srcRaw=null;this.sourceCollection=t}}get newItemCreator(){return this._itemCreator}set newItemCreator(e){this._itemCreator=asFunction(e)}get sortConverter(){return this._srtCvt}set sortConverter(e){e!=this._srtCvt&&(this._srtCvt=asFunction(e,!0))}get sortComparer(){return this._srtCmp}set sortComparer(e){e!=this._srtCmp&&(this._srtCmp=asFunction(e,!0))}get useStableSort(){return this._stableSort}set useStableSort(e){if(e!=this._stableSort){this._stableSort=asBoolean(e);this.refresh()}}get sortNulls(){return this._srtNulls}set sortNulls(e){if((e=asEnum(e,SortNulls))!=this._srtNulls){this._srtNulls=e;this.refresh()}}get sortNullsFirst(){return this.sortNulls!=SortNulls.Last}set sortNullsFirst(e){_deprecated("sortNullsFirst","sortNulls");this.sortNulls=asBoolean(e)?SortNulls.First:SortNulls.Last}getAggregate(e,t,s){return getAggregate(e,s?this._pgView:this._view,t)}get trackChanges(){return this._trackChanges}set trackChanges(e){this._trackChanges=asBoolean(e)}get refreshOnEdit(){return this._refreshOnEdit}set refreshOnEdit(e){this._refreshOnEdit=asBoolean(e)}get itemsAdded(){return this._chgAdded}get itemsRemoved(){return this._chgRemoved}get itemsEdited(){return this._chgEdited}clearChanges(){this._chgAdded.clear();this._chgRemoved.clear();this._chgEdited.clear()}implementsInterface(e){switch(e){case"ICollectionView":case"IEditableCollectionView":case"IPagedCollectionView":case"INotifyCollectionChanged":return!0}return!1}get getError(){return this._getError}set getError(e){if(this._getError!=e){this._getError=asFunction(e);this._raiseCollectionChanged()}}onCollectionChanged(e=NotifyCollectionChangedEventArgs.reset){e.action!=NotifyCollectionChangedAction.Change||this._committing||this._canceling||e.item==this.currentEditItem||e.item==this.currentAddItem||this._trackItemChanged(e.item);this._updating||this.collectionChanged.raise(this,e)}_raiseCollectionChanged(e=NotifyCollectionChangedAction.Reset,t,s){let i=new NotifyCollectionChangedEventArgs(e,t,s);this.onCollectionChanged(i)}onSourceCollectionChanging(e){this.sourceCollectionChanging.raise(this,e);return!e.cancel}onSourceCollectionChanged(e){this.sourceCollectionChanged.raise(this,e)}get canFilter(){return this._canFilter}set canFilter(e){this._canFilter=asBoolean(e)}get canGroup(){return this._canGroup}set canGroup(e){this._canGroup=asBoolean(e)}get canSort(){return this._canSort}set canSort(e){this._canSort=asBoolean(e)}get currentItem(){return this._pgView&&this._idx>-1&&this._idx<this._pgView.length?this._pgView[this._idx]:null}set currentItem(e){this.moveCurrentTo(e)}get currentPosition(){return this._idx}set currentPosition(e){this.moveCurrentToPosition(asNumber(e))}get filter(){return this._filter}set filter(e){if(this._filter!=e){this._filter=asFunction(e);this.canFilter&&this.refresh()}}get filters(){return this._filters}get groupDescriptions(){return this._grpDesc}get groups(){return this._groups}get isEmpty(){return!this._pgView||!this._pgView.length}get sortDescriptions(){return this._srtDsc}get sourceCollection(){return this._src}set sourceCollection(e){if(e!=this._srcRaw){if(!this.onSourceCollectionChanging(new CancelEventArgs))return;let t=this.currentPosition;this.commitEdit();null!=this._ncc&&this._ncc.collectionChanged.removeHandler(this._sourceChanged);this._srcRaw=e;this._src=asArray(e,!1);this._calcFields&&(this._src=_getCalculatedArray(this._src,this._calcFields));this._ncc=tryCast(this._src,"INotifyCollectionChanged");this._ncc&&this._ncc.collectionChanged.addHandler(this._sourceChanged,this);this.clearChanges();this.refresh();this.moveCurrentToFirst();this.onSourceCollectionChanged();this.currentPosition<0&&t>-1&&this.onCurrentChanged()}}_sourceChanged(e,t){this._updating<=0&&this.refresh()}contains(e){return this._pgView.indexOf(e)>-1}moveCurrentTo(e){return this.moveCurrentToPosition(this._pgView.indexOf(e))}moveCurrentToFirst(){return this.moveCurrentToPosition(0)}moveCurrentToLast(){return this.moveCurrentToPosition(this._pgView.length-1)}moveCurrentToPrevious(){return this._idx>0&&this.moveCurrentToPosition(this._idx-1)}moveCurrentToNext(){return this.moveCurrentToPosition(this._idx+1)}moveCurrentToPosition(e){if(e>=-1&&e<this._pgView.length&&e!=this._idx){let t=new CancelEventArgs;if(this.onCurrentChanging(t)){let t=this._pgView[e];this._edtItem&&t!=this._edtItem?this.commitEdit():this._newItem&&t!=this._newItem&&this.commitNew();this._idx=e;this.onCurrentChanged()}}return this._idx==e}refresh(){if(this._newItem||this._edtItem||this._updating>0)this._pendingRefresh=!0;else{this._performRefresh();this.onCollectionChanged()}}_commitAndRefresh(){if(this.currentEditItem||this.currentAddItem){this._pendingRefresh=!0;this.commitEdit()}else this.refresh()}_performRefresh(){if(this._updating>0){this._pendingRefresh=!0;return}this._pendingRefresh=!1;let e=this.currentItem;this._view=this._src?this._performFilter(this._src):[];if(this.canSort&&this._srtDsc.length>0){this._view==this._src&&(this._view=this._src.slice());this._performSort(this._view)}this._groups=this.canGroup?this._createGroups(this._view):null;this._fullGroups=this._groups;this._groups&&(this._view=this._mergeGroupItems(this._groups));this._pgIdx=clamp(this._pgIdx,0,this.pageCount-1);this._pgView=this._getPageView();if(this._groups&&this.pageCount>1){this._groups=this._createGroups(this._pgView);this._mergeGroupItems(this._groups)}let t=this._keepCurrentItem?this._pgView.indexOf(e):-1;t<0&&(t=Math.min(this._idx,this._pgView.length-1));this._idx=t;this._digest=this._getGroupsDigest(this.groups)}_performSort(e){if(this._stableSort){let t=e.map((e,t)=>({item:e,index:t})),s=this._compareItems();t.sort((e,t)=>{let i=s(e.item,t.item);return 0==i?e.index-t.index:i});for(let s=0;s<e.length;s++)e[s]=t[s].item}else e.sort(this._compareItems())}_compareItems(){let e=this._srtDsc,t=this._srtCvt,s=this._srtCmp,i=CollectionView._collator,r=!0,n=0;return(o,a)=>{for(let l=0;l<e.length;l++){let h=e[l],c=h._bnd.getValue(o),u=h._bnd.getValue(a);if(t){c=t(h,o,c,r);u=t(h,a,u,!1);r=!1}if(s&&null!=(n=s(c,u))){if(0!=n)return h.ascending?+n:-n}else{c!=c&&(c=null);u!=u&&(u=null);if(c!==u&&(null==c||null==u))switch(this._srtNulls){case SortNulls.First:return null==c?-1:1;case SortNulls.Last:return null==c?1:-1;default:n=null==c?-1:1;return h.ascending?+n:-n}if("string"==typeof c&&"string"==typeof u){if(i){if(0!=(n=i.compare(c,u)))return h.ascending?+n:-n;continue}let e=c.toLowerCase(),t=u.toLowerCase();if(e!=t){c=e;u=t}}if(0!=(n=c<u?-1:c>u?1:0))return h.ascending?+n:-n}}return 0}}_performFilter(e){return this.canFilter&&(this._filter||this._filters.length)?e.filter(this._filterItem,this):e}_filterItem(e){var t=!this._filter||this._filter(e);for(let s=0;s<this._filters.length&&t;s++)t=this._filters[s](e);return t}onCurrentChanged(e){this.currentChanged.raise(this,e)}onCurrentChanging(e){this.currentChanging.raise(this,e);return!e.cancel}get items(){return this._pgView}beginUpdate(){this._updating++}endUpdate(e=!0){this._updating--;e&&(this._pendingRefresh=!0);this._updating<=0&&this._pendingRefresh&&this.refresh()}get isUpdating(){return this._updating>0}deferUpdate(e,t=!0){try{this.beginUpdate();e()}finally{this.endUpdate(t)}}get canAddNew(){return this._canAddNew}set canAddNew(e){if(e!=this._canAddNew){this._canAddNew=asBoolean(e);this._raiseCollectionChanged()}}get canCancelEdit(){return this._canCancelEdit}set canCancelEdit(e){this._canCancelEdit=asBoolean(e)}get canRemove(){return this._canRemove}set canRemove(e){this._canRemove=asBoolean(e)}get currentAddItem(){return this._newItem}get currentEditItem(){return this._edtItem}get isAddingNew(){return null!=this._newItem}get isEditingItem(){return null!=this._edtItem}editItem(e){if(e!=this._edtItem&&this.moveCurrentTo(e)){this.commitEdit();this._edtItem=e;this._edtClone={};this._extend(this._edtClone,this._edtItem)}}commitEdit(){let e=this._edtItem,t=this._edtClone;if(null!=e){this._committing=!0;let s=this._getChangedFields(e,t),i=this._pendingRefresh;this._edtItem=null;this._edtClone=null;let r=this._pgView.indexOf(e),n=this._digest;this._needRefresh(s)&&this._refreshOnEdit&&this._performRefresh();s&&this._trackItemChanged(e);this._pgView.indexOf(e)!=r||n!=this._digest||i?this._raiseCollectionChanged():this._raiseCollectionChanged(NotifyCollectionChangedAction.Change,e,r);this.commitNew();this._committing=!1;if(this.sourceCollection instanceof ObservableArray){this._updating++;let t=new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Change,e);this.sourceCollection.onCollectionChanged(t);this._updating--}}}cancelEdit(){let e=this._edtItem;if(null!=e){this._edtItem=null;if(!this.canCancelEdit)return;let t=this._src.indexOf(e);if(t>=0&&this._edtClone){this._extend(this._src[t],this._edtClone);this._edtClone=null;this._canceling=!0;this._raiseCollectionChanged(NotifyCollectionChangedAction.Change,e,t);this._canceling=!1;if(this._pendingRefresh&&this._refreshOnEdit){this._performRefresh();this._raiseCollectionChanged()}}}}addNew(e,t=!1){this.commitEdit();if(!this.canAddNew)return null;if(null==e){let t=this.sourceCollection;e=this.newItemCreator?this.newItemCreator():t&&t.length?new t[0].constructor:{}}if(null!=e){this._newItem=e;this._updating++;this._src.push(e);this._updating--;this._pgView!=this._src&&this._pgView.push(e);if(this.groups&&this.groups.length){let t=this.groups[this.groups.length-1];t.items.push(e);for(;t.groups&&t.groups.length;)(t=t.groups[t.groups.length-1]).items.push(e)}this._raiseCollectionChanged(NotifyCollectionChangedAction.Add,e,this._pgView.length-1);this.moveCurrentTo(e);t&&this.commitNew()}return this._newItem}commitNew(){let e=this._newItem;if(null!=e){this._newItem=null;let t=this._pgView.indexOf(e),s=this._digest;this._refreshOnEdit&&this._performRefresh();if(this._trackChanges){let t=this._chgEdited.indexOf(e);t>-1&&this._chgEdited.removeAt(t);this._chgAdded.indexOf(e)<0&&this._chgAdded.push(e)}this._pgView.indexOf(e)==t&&s==this._digest?this._raiseCollectionChanged(NotifyCollectionChangedAction.Change,e,t):this._raiseCollectionChanged()}}cancelNew(){let e=this._newItem;null!=e&&this.remove(e)}remove(e){let t=e==this._newItem;t&&(this._newItem=null);e==this._edtItem&&this.cancelEdit();if(!this.canRemove)return;let s=this._src.indexOf(e);if(s>-1){let i=this.currentItem;this._updating++;this._src.splice(s,1);this._updating--;let r=this._digest;if(this._refreshOnEdit)this._performRefresh();else{let t=this._pgView.indexOf(e);t>=0&&this._pgView.splice(t,1)}if(this._trackChanges){let s=this._chgAdded.indexOf(e);s>-1&&this._chgAdded.removeAt(s);let i=this._chgEdited.indexOf(e);i>-1&&this._chgEdited.removeAt(i);this._chgRemoved.indexOf(e)<0&&!t&&s<0&&this._chgRemoved.push(e)}let n=this.sortDescriptions.length>0,o=this.pageSize>0&&this._pgIdx>-1;n||o||r!=this._getGroupsDigest(this.groups)?this._raiseCollectionChanged():this._raiseCollectionChanged(NotifyCollectionChangedAction.Remove,e,s);this.currentItem!==i&&this.onCurrentChanged()}}removeAt(e){e=asInt(e);this.remove(this._pgView[e])}_trackItemChanged(e){if(this._trackChanges){let t=this.sourceCollection;if(t&&t.indexOf(e)>-1){let t=this._chgEdited.indexOf(e),s=NotifyCollectionChangedAction.Change;if(t<0&&this._chgAdded.indexOf(e)<0)this._chgEdited.push(e);else if(t>-1){let i=new NotifyCollectionChangedEventArgs(s,e,t);this._chgEdited.onCollectionChanged(i)}else if((t=this._chgAdded.indexOf(e))>-1){let i=new NotifyCollectionChangedEventArgs(s,e,t);this._chgAdded.onCollectionChanged(i)}}}}_extend(e,t,s=2){for(let i in t)try{let r=t[i];if(s>0&&isObject(r)){e[i]={};this._extend(e[i],r,s--)}else e[i]=r}catch(e){}}_getChangedFields(e,t){assert(null!=t&&null!=e,"Two objects expected.");let s={};for(let i in t)try{this._sameValue(e[i],t[i])||(s[i]=!0)}catch(e){}for(let i in e)try{this._sameValue(e[i],t[i])||(s[i]=!0)}catch(e){}let i=Object.keys(s);return i.length?i:null}_needRefresh(e){if(this._pendingRefresh)return!0;if(!e)return!1;if(this._filter)return!0;for(let t=0;t<this._srtDsc.length;t++){let s=this._getBindingRoot(this._srtDsc[t].property);if(e.indexOf(s)>-1)return!0}for(let t=0;t<this._grpDesc.length;t++){let s=this._grpDesc[t];if(!(s instanceof PropertyGroupDescription))return!0;let i=this._getBindingRoot(s.propertyName);if(e.indexOf(i)>-1)return!0}return!1}_getBindingRoot(e){let t=e.indexOf(".");return t>-1?e.substr(0,t):e}_sameContent(e,t){return null==this._getChangedFields(e,t)}_sameValue(e,t){return!(e!==t&&!DateTime.equals(e,t))||!(!isObject(e)||!isObject(t))&&null==this._getChangedFields(e,t)}get canChangePage(){return this._canChangePage}set canChangePage(e){this._canChangePage=asBoolean(e)}get isPageChanging(){return!1}get itemCount(){return this._pgView.length}get pageIndex(){return this._pgIdx}get pageSize(){return this._pgSz}set pageSize(e){if(e!=this._pgSz){this._pgSz=asInt(e);this.refresh()}}get totalItemCount(){return this._view.length}get pageCount(){return this.pageSize?Math.ceil(this.totalItemCount/this.pageSize):1}moveToFirstPage(){return this.moveToPage(0)}moveToLastPage(){return this.moveToPage(this.pageCount-1)}moveToPreviousPage(){return this.moveToPage(this.pageIndex-1)}moveToNextPage(){return this.moveToPage(this.pageIndex+1)}moveToPage(e){let t=clamp(e,0,this.pageCount-1);if(t!=this._pgIdx){if(!this.canChangePage)return;let e=new PageChangingEventArgs(t);if(this.onPageChanging(e)){this._pgIdx=t;this._pgView=this._getPageView();this._idx=0;this.groupDescriptions&&0!=this.groupDescriptions.length?this.refresh():this.onCollectionChanged();this.onPageChanged()}}return this._pgIdx==e}onPageChanged(e){this.pageChanged.raise(this,e)}onPageChanging(e){this.pageChanging.raise(this,e);return!e.cancel}_getFullGroup(e){let t=this._getGroupByPath(this._fullGroups,e.level,e._path);null!=t&&(e=t);return e}_getGroupByPath(e,t,s){if(e)for(let i=0;i<e.length;i++){let r=e[i];if(r.level==t&&r._path==s)return r;if(r.level<t&&0==s.indexOf(r._path)&&null!=(r=this._getGroupByPath(r.groups,t,s)))return r}return null}_getPageView(){if(this.pageSize<=0||this._pgIdx<0)return this._view;let e=this._pgSz*this._pgIdx,t=Math.min(e+this._pgSz,this._view.length);return this._view.slice(e,t)}_createGroups(e){if(!this._grpDesc||!this._grpDesc.length)return null;let t=[],s={},i=null;e.forEach(e=>{let r=t,n=this._grpDesc.length,o="";for(let t=0;t<n;t++){let a=this._grpDesc[t],l=a.groupNameFromItem(e,t),h=t==n-1;if(!(i=s[o])&&isPrimitive(l)){i={};s[o]=i}let c=this._getGroup(a,r,i,l,t,h);o+="/"+l;c._path=o;h&&c.items.push(e);r=c.groups}});return t}_getGroupsDigest(e){let t="";for(let s=0;null!=e&&s<e.length;s++){let i=e[s];t+="{"+i.name+":"+(i.items?i.items.length:"*");if(i.groups.length>0){t+=",";t+=this._getGroupsDigest(i.groups)}t+="}"}return t}_mergeGroupItems(e){let t=[];for(let s=0;s<e.length;s++){let i=e[s];if(!i._isBottomLevel){let e=this._mergeGroupItems(i.groups);for(let t=0,s=e.length;t<s;t++)i._items.push(e[t])}for(let e=0,s=i._items.length;e<s;e++)t.push(i._items[e])}return t}_getGroup(e,t,s,i,r,n){let o;if(s&&isPrimitive(i)){if(o=s[i])return o}else for(let s=0;s<t.length;s++)if(e.namesMatch(t[s].name,i))return t[s];let a=new CollectionViewGroup(e,i,r,n);t.push(a);s&&(s[i]=a);return a}}CollectionView._collator="undefined"!=typeof window&&window.Intl&&Intl.Collator?new Intl.Collator:null;exports.CollectionView=CollectionView;class CollectionViewGroup{constructor(e,t,s,i){this._gd=e;this._name=t;this._level=s;this._isBottomLevel=i;this._groups=[];this._items=[]}get name(){return this._name}get level(){return this._level}get isBottomLevel(){return this._isBottomLevel}get items(){return this._items}get groups(){return this._groups}get groupDescription(){return this._gd}getAggregate(e,t,s){let i=tryCast(s,CollectionView);return getAggregate(e,(i?i._getFullGroup(this):this).items,t)}}exports.CollectionViewGroup=CollectionViewGroup;exports.controlBaseClass="undefined"!=typeof window&&window["wj-control-is-element"]?HTMLElement:Object;var __isES6Mode=!1;try{let e=class __c{};e.prototype=Array.prototype;__isES6Mode=e.prototype!==Array.prototype}catch(e){__isES6Mode=!0}var PopupPosition,__callSuper=__isES6Mode||exports.controlBaseClass!==Object;class ControlBase extends exports.controlBaseClass{constructor(){__callSuper&&super()}}exports.ControlBase=ControlBase;class Control extends ControlBase{constructor(e,t=null,s=!1){super();this._listeners=[];this._pristine=!0;this._focus=!1;this._updating=0;this._fullUpdate=!1;this.gotFocus=new Event;this.lostFocus=new Event;this.invalidInput=new Event;this.refreshing=new Event;this.refreshed=new Event;this._updateWme();assert(null==Control.getControl(e),"Element is already hosting a control.");let i=getElement(e);assert(null!=i,"Cannot find the host element.");this._orgTabIndex=i.hasAttribute("tabindex")?i.tabIndex:0;this._orgOuter=i.outerHTML;this._orgTag=i.tagName;this._orgAtts=i.attributes;"INPUT"!=i.tagName&&"SELECT"!=i.tagName||(i=this._replaceWithDiv(i));this._e=i;i[Control._CTRL_KEY]=this;let r=this.addEventListener.bind(this);if(1==s){this._szCtl=new Size(i.offsetWidth,i.offsetHeight);let e=window.ResizeObserver,t=null;e&&(t=this._szObserver=new e(e=>{e.forEach(e=>{let t=Control.getControl(e.target);t&&t._handleResize()})}));t?t.observe(i):r(window,"resize",this._handleResize.bind(this))}let n=this._handleFocusBlur.bind(this);r(i,"focus",n,!0);r(i,"blur",n,!0);let o=this._handleDisabled.bind(this);r(i,"mousedown",o,!0);r(i,"mouseup",o,!0);r(i,"click",o,!0);r(i,"dblclick",o,!0);r(i,"wheel",o,getEventOptions(!0,!0));r(i,"keydown",e=>{this.isDisabled&&e.keyCode!=Key.Tab&&e.preventDefault()});if(null==Control._touching){Control._touching=!1;if("ontouchstart"in window||"onpointerdown"in window){let e=document,t=this._handleTouchStart,s=this._handleTouchEnd,i=getEventOptions(!0,!0);if("ontouchstart"in window){e.addEventListener("touchstart",t,i);"touchend,touchcancel".split(",").forEach(t=>{e.addEventListener(t,s,i)})}else if("onpointerdown"in window){e.addEventListener("pointerdown",t,i);"pointerup,pointercancel".split(",").forEach(t=>{e.addEventListener(t,s,i)})}}}}getTemplate(){for(let e=Object.getPrototypeOf(this);e;e=Object.getPrototypeOf(e)){let t=e.constructor.controlTemplate;if(t)return t}return null}applyTemplate(e,t,s,i){let r=this._e;e&&addClass(r,e);let n=null;t&&(n=createElement(t,r));let o=r.querySelectorAll("a.wj-btn");for(var a=0;a<o.length;a++){let e=o[a];setAttribute(e,"role","button",!0);setAttribute(e,"href","",!0);setAttribute(e,"draggable",!1,!0)}let l=r.querySelectorAll("button");for(a=0;a<l.length;a++)setAttribute(l[a],"type","button",!0);let h=r.querySelectorAll("input"),c=1==h.length?h[0]:null;if(c){let e=Control._rxInputAtts;this._copyAttributes(c,r.attributes,e);this._copyAttributes(c,this._orgAtts,e)}if(c&&r.id){let e=r;for(;e.parentElement;)e=e.parentElement;let t=e.querySelector('label[for="'+r.id+'"]');if(t instanceof HTMLLabelElement){let e=getUniqueId(r.id+"_input");c.id=e;t.htmlFor=e}}if(c){let e=c.value,t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1);this.gotFocus.addHandler(()=>e=c.value);this.addEventListener(c,"focus",()=>e=c.value);this.addEventListener(c,"input",()=>{this._pristine=!1;setTimeout(()=>e=c.value)});this.addEventListener(r,"blur",()=>{if(!this.containsFocus()){if(this._pristine){this._pristine=!1;this._updateState()}if(e!=c.value){e=c.value;c.dispatchEvent(t)}}},!0)}c?r.tabIndex=-1:r.getAttribute("tabindex")||(r.tabIndex=0);this._updateState();if(s)for(let e in s){let t=s[e];this[e]=n.querySelector('[wj-part="'+t+'"]');null==this[e]&&n.getAttribute("wj-part")==t&&(this[e]=n);if(null==this[e])throw'Missing template part: "'+t+'"';if(t==i){let t="name",s=r.attributes[t];s&&s.value&&this[e].setAttribute(t,s.value);t="accesskey";if((s=r.attributes[t])&&s.value){this[e].setAttribute(t,s.value);r.removeAttribute(t)}}}return n}dispose(){if(!this._e)return;let e=this._e.querySelectorAll(".wj-control");for(let t=0;t<e.length;t++){let s=Control.getControl(e[t]);s&&s.dispose()}if(this._toInv){clearTimeout(this._toInv);this._toInv=null}let t=this._szObserver;t&&t.disconnect();this.removeEventListener();for(let e in this)if(e.length>2&&0==e.indexOf("on")){let t=this[e[2].toLowerCase()+e.substr(3)];t instanceof Event&&t.removeAllHandlers()}let s=this.collectionView;if(s instanceof CollectionView)for(let e in s){let t=s[e];t instanceof Event&&t.removeHandler(null,this)}this._e.parentNode&&(this._e.outerHTML=this._orgOuter);this._e[Control._CTRL_KEY]=null;this._e=this._orgOuter=this._orgTag=this._szObserver=null}static getControl(e){let t=getElement(e);return t?asType(t[Control._CTRL_KEY],Control,!0):null}get hostElement(){return this._e}get rightToLeft(){null==this._rtlDir&&(this._rtlDir=!!this._e&&"rtl"==getComputedStyle(this._e).direction);return this._rtlDir}focus(){let e=this._e;e&&(e.tabIndex>=0||!moveFocus(e,0))&&e.focus()}containsFocus(){return contains(this._e,getActiveElement(),!0)}invalidate(e=!0){this._rtlDir=null;this._fullUpdate=this._fullUpdate||e;if(this._toInv){clearTimeout(this._toInv);this._toInv=null}this.isUpdating||(this._toInv=setTimeout(()=>{this.refresh(this._fullUpdate);this._toInv=null},Control._REFRESH_INTERVAL))}refresh(e=!0){if(!this.isUpdating){this.onRefreshing();setTimeout(()=>{this.onRefreshed()})}if(!this.isUpdating&&this._toInv){clearTimeout(this._toInv);this._toInv=null;this._fullUpdate=!1}this._updateState();this._updateWme()}static invalidateAll(e){e||(e=document.body);let t=e.children;if(t)for(let e=0;e<t.length;e++)Control.invalidateAll(t[e]);let s=Control.getControl(e);s&&s.invalidate()}static refreshAll(e){e||(e=document.body);if(e.children)for(let t=0;t<e.children.length;t++)Control.refreshAll(e.children[t]);let t=Control.getControl(e);t&&t.refresh()}static disposeAll(e){let t=Control.getControl(e);if(t)t.dispose();else if(e.children)for(let t=0;t<e.children.length;t++)Control.disposeAll(e.children[t])}beginUpdate(){this._updating++}endUpdate(){this._updating--;this._updating<=0&&this.invalidate()}get isUpdating(){return this._updating>0}deferUpdate(e){try{this.beginUpdate();e()}finally{this.endUpdate()}}get isTouching(){return Control._touching}get isDisabled(){return this._e&&null!=this._e.getAttribute("disabled")}set isDisabled(e){if((e=asBoolean(e,!0))!=this.isDisabled){let t=this._e;if(t){let s="disabled";toggleClass(t,"wj-state-disabled",e);setAttribute(t,s,e?s:null);t.tabIndex=this.isDisabled||t.querySelector("input")?-1:this._orgTabIndex;let i=t.querySelectorAll("input,textarea,button,command,fieldset,keygen,optgroup,option,select");for(let t=0;t<i.length;t++){let s=i[t];if(!hasClass(s,"wj-btn"))if(e)s.tabIndex=-1;else{let e=!1;for(let t=s;t&&!e;t=t.parentElement){Control.getControl(closest(s,".wj-control")).isDisabled&&(e=!0)}setAttribute(s,"tabindex",e?-1:null)}}}}}initialize(e){copy(this,e)}addEventListener(e,t,s,i,r){if(e){null==i&&(i=!1);isBoolean(i)&&null==r&&(t.indexOf("touch")>-1||t.indexOf("wheel")>-1)&&(r=!1);let n=isBoolean(i)&&isBoolean(r)?getEventOptions(i,r):i;e.addEventListener(t,s,n);this._listeners.push({target:e,type:t,fn:s,capture:i})}}removeEventListener(e,t,s,i){let r=0;for(let n=0;n<this._listeners.length;n++){let o=this._listeners[n];if(!(null!=e&&e!=o.target||null!=t&&t!=o.type||null!=s&&s!=o.fn||null!=i&&i!=o.capture)){o.target.removeEventListener(o.type,o.fn,o.capture);this._listeners.splice(n,1);n--;r++}}return r}onGotFocus(e){this.gotFocus.raise(this,e)}onLostFocus(e){this.lostFocus.raise(this,e)}onInvalidInput(e){this.invalidInput.raise(this,e);e.cancel&&this.focus();this._updateState();return!e.cancel}onRefreshing(e){this.refreshing.raise(this,e)}onRefreshed(e){this.refreshed.raise(this,e)}_getProductInfo(){return"B0C3,Control"}_updateWme(){let e=this._getProductInfo(),t=Control._toWme,s=_updateWme;isFunction(s)&&!t[e]&&(t[e]=setTimeout(()=>{t[e]=null;s(this,Control._licKey)},Control._REFRESH_INTERVAL))}_hasPendingUpdates(){return null!=this._toInv}_handleResize(){if(this._e.parentElement){let e=new Size(this._e.offsetWidth,this._e.offsetHeight);if(!e.equals(this._szCtl)){this._szCtl=e;(e.width||e.height)&&this.invalidate()}}}_handleFocusBlur(){this._toFocus||(this._toFocus=setTimeout(()=>{this._toFocus=null;this._updateFocusState()},Control._FOCUS_INTERVAL))}_updateFocusState(){setTimeout(()=>{let e=EventArgs.empty,t=document.body.querySelectorAll(".wj-state-focused");for(let s=0;s<t.length;s++){let i=Control.getControl(t[s]);if(i&&i._focus&&!i.containsFocus()){removeClass(i._e,"wj-state-focus");i._focus=!1;i._updateState();i.onLostFocus(e)}}let s=getActiveElement();if(s){let t=!0;for(let i=s;i;){let s=Control.getControl(i);if(s&&!s._focus&&s.containsFocus()){if(t){addClass(i,"wj-state-focus");t=!1}s._focus=!0;s._updateState();s.onGotFocus(e)}i=i[Control._OWNR_KEY]||i.parentNode}}})}_updateState(){let e=this.hostElement;if(e){toggleClass(e,"wj-state-focused",this._focus);this._rtlDir="rtl"==getComputedStyle(e).direction;toggleClass(e,"wj-rtl",this._rtlDir);let t=e.querySelector("input");if(t instanceof HTMLInputElement){toggleClass(e,"wj-state-empty",0==t.value.length);toggleClass(e,"wj-state-readonly",t.readOnly);let s=t.validationMessage;toggleClass(e,"wj-state-invalid",!this._pristine&&null!=s&&s.length>0)}}}_handleTouchStart(e){if(null==e.pointerType||"touch"==e.pointerType){if(Control._toTouch){clearTimeout(Control._toTouch);Control._toTouch=null}Control._touching=!0;let t=e.target,s=getActiveElement();if(s&&!contains(s,t)){Control.getControl(closest(s,".wj-control"))&&t.focus()}}}_handleTouchEnd(e){if(null==e.pointerType||"touch"==e.pointerType){Control._toTouch=setTimeout((function(){Control._toTouch=null;Control._touching=!1}),900);if(document.querySelector("ion-app")){let t=e.target;if(closest(t,".wj-dropdown-panel,.wj-dropdown")){t.focus();e.stopPropagation();e.stopImmediatePropagation()}}}}_handleDisabled(e){if(this.isDisabled||closest(e.target,".wj-state-disabled")){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation()}}_replaceWithDiv(e){let t=document.createElement("div");e.parentElement.replaceChild(t,e);t.innerHTML=e.innerHTML;this._copyAttributes(t,e.attributes,/id|style|class/i);return t}_copyAttributes(e,t,s){if(e)for(let i=0;i<t.length;i++){let r=t[i].name;r.match(s)&&e.setAttribute(r,t[i].value)}}_getKeyCode(e){let t=e.keyCode;if(this.rightToLeft)switch(t){case Key.Right:t=Key.Left;break;case Key.Left:t=Key.Right}return t}}Control._toWme={};Control._REFRESH_INTERVAL=10;Control._FOCUS_INTERVAL=5;Control._ANIM_DEF_DURATION=400;Control._ANIM_DEF_STEP=35;Control._CLICK_DELAY=800;Control._CLICK_REPEAT=75;Control._CLIPBOARD_DELAY=100;Control._POPUP_ZINDEX=1500;Control._SEARCH_DELAY=500;Control._HOVER_DELAY=400;Control._LEAVE_DELAY=600;Control._DRAG_SCROLL_EDGE=15;Control._DRAG_SCROLL_STEP=20;Control._CTRL_KEY="$WJ-CTRL";Control._OWNR_KEY="$WJ-OWNR";Control._SCRL_KEY="$WJ-SCRL";Control._TTIP_KEY="$WJ-TTIP";Control._rxInputAtts=/name|tabindex|placeholder|autofocus|autocomplete|autocorrect|autocapitalize|spellcheck|readonly|minlength|maxlength|pattern|type|aria-.+/i;exports.Control=Control;class Clipboard{static copy(e){Clipboard._copyPaste(asString(e),null)}static paste(e){e=asFunction(e);Clipboard._copyPaste(null,e)}static _copyPaste(e,t){let s=getActiveElement(),i=closest(s,".wj-control");for(;i&&Control.getControl(i);)i=i.parentElement;if(i=i||document.body){let r=!1,n=createElement('<textarea class="wj-clipboard">',i,{position:"fixed",opacity:"0"});n.onkeydown=e=>e.preventDefault();n.onchange=e=>e.stopImmediatePropagation();if(isString(e)){n.value=e;n.select();document.execCommand("copy")&&(r=!0)}else{n.select();if(isFunction(t)&&document.execCommand("paste")){t(n.value);r=!0}}setTimeout(()=>{s.focus({preventScroll:!0});removeChild(n);!r&&isFunction(t)&&t(n.value)},Control._CLIPBOARD_DELAY)}}}exports.Clipboard=Clipboard;class _ClickRepeater{constructor(e){this._isDown=!1;this._mousedownBnd=this._mousedown.bind(this);this._mouseupBnd=this._mouseup.bind(this);this._clickBnd=this._click.bind(this);this.element=e;this._connect(!0)}get element(){return this._e}set element(e){this._connect(!1);this._e=asType(e,HTMLElement,!0);this._connect(!0)}get disabled(){return this._disabled}set disabled(e){this._disabled=asBoolean(e)}_connect(e){this._e&&_ClickRepeater._startEvents.forEach(t=>{e?this._e.addEventListener(t,this._mousedownBnd):this._e.removeEventListener(t,this._mousedownBnd)})}_clearTimeouts(){if(this._toRepeat){clearTimeout(this._toRepeat);this._toRepeat=null}if(this._toDelay){clearTimeout(this._toDelay);this._toDelay=null}}_mousedown(e){this._isDown&&this._mouseup(null);if(!this._disabled){this._isDown=!0;_ClickRepeater._stopEvents.forEach(e=>{document.addEventListener(e,this._mouseupBnd)});this._clearTimeouts();this._toDelay=setTimeout(()=>{if(this._isDown){this._click();this._toRepeat=setTimeout(this._clickBnd,Control._CLICK_REPEAT)}},Control._CLICK_DELAY)}}_mouseup(e){this._isDown&&e&&"keydown"!=e.type&&this._clicked&&e.preventDefault();_ClickRepeater._stopEvents.forEach(e=>{document.removeEventListener(e,this._mouseupBnd)});this._clearTimeouts();this._isDown=!1;this._clicked=!1}_click(){this._clicked=!0;this._clearTimeouts();if(this._e){this._e.click();this._isDown&&(this._toRepeat=setTimeout(this._clickBnd,Control._CLICK_REPEAT))}}}_ClickRepeater._startEvents=["mousedown","touchstart"];_ClickRepeater._stopEvents=["mouseup","mouseout","keydown","touchend","touchcancel"];exports._ClickRepeater=_ClickRepeater;!function(e){e[e.Above=0]="Above";e[e.AboveRight=1]="AboveRight";e[e.RightTop=2]="RightTop";e[e.Right=3]="Right";e[e.RightBottom=4]="RightBottom";e[e.BelowRight=5]="BelowRight";e[e.Below=6]="Below";e[e.BelowLeft=7]="BelowLeft";e[e.LeftBottom=8]="LeftBottom";e[e.Left=9]="Left";e[e.LeftTop=10]="LeftTop";e[e.AboveLeft=11]="AboveLeft"}(PopupPosition=exports.PopupPosition||(exports.PopupPosition={}));function showPopup(e,t,s,i,r=!0,n){let o=e.offsetHeight||e.offsetWidth,a=s;(isBoolean(s)||null==s)&&(a=s?PopupPosition.AboveLeft:PopupPosition.BelowLeft);let l=_getPopupParent(t);_addPopupToDOM(e,l);_copyPopupStyles(e,t,r);Control.refreshAll(e);isFirefox()?requestAnimationFrame(()=>{_updatePopupPosition(e,t,a)}):_updatePopupPosition(e,t,a);t instanceof HTMLElement&&(e[Control._OWNR_KEY]=t);if(!o){_hidePopupOnscroll(e,t,n);if(i)return animate(t=>e.style.opacity=t<1?t.toString():"");e.style.opacity=""}return null}exports.showPopup=showPopup;function hidePopup(e,t=!0,s=!1){let i=null;s?i=animate(s=>{e.style.opacity=(1-s).toString();if(1==s){_hidePopup(e,t);e.style.opacity=""}}):_hidePopup(e,t);return i}exports.hidePopup=hidePopup;function _updatePopupPosition(e,t,s){let i=_getReferenceRect(e,t),r=_getPopupOffset(e),n=_getPopupPosition(e,i,s,r),o={position:"absolute",zIndex:Control._POPUP_ZINDEX};if(0==r.x){o.left=n.x;o.top=n.y}else o.transform="translate("+n.x+"px, "+n.y+"px)";setCss(e,o)}function _hidePopup(e,t){e.style.display="none";t&&e.parentElement&&setTimeout(()=>{if("none"==e.style.display){removeChild(e);isFunction(t)&&t()}},Control._FOCUS_INTERVAL+50);let s=e[Control._SCRL_KEY];s instanceof Control&&s.dispose();delete e[Control._SCRL_KEY];delete e[Control._OWNR_KEY]}function _isjQueryDialog(e){let t=window.jQuery,s=isFunction(t)?t(e):null;return s&&isFunction(s.dialog)&&hasClass(e,"ui-dialog")}function _getPopupParent(e){let t=document.body;if(e instanceof HTMLElement){if(!contains(document.body,e))return t;for(let s=e;s;s=s.parentElement){if("DIALOG"==s.tagName||"ION-CONTENT"==s.tagName||"fixed"==getComputedStyle(s).position){t=s;break}if(_isjQueryDialog(s)){t=s.querySelector(".ui-dialog-content")||s;break}}}return t}function _addPopupToDOM(e,t){if(!e.offsetHeight||!e.offsetWidth||e.parentElement!=t){setCss(e,{opacity:"0",position:"fixed",left:0,top:0,transform:"",display:""});t.appendChild(e)}}function _getPopupOffset(e){let t=document.body,s=document.documentElement,i=e.parentElement,r=new Point(t.scrollLeft||pageXOffset,t.scrollTop||pageYOffset);if(i!=t){let n=i==t?s:e.offsetParent||i;n==t&&(n=i);if(n){let e=n.getBoundingClientRect();r=new Point(n.scrollLeft-e.left,n.scrollTop-e.top)}}if(i instanceof HTMLElement){let e=getComputedStyle(i);r.x-=parseFloat(e.borderLeftWidth);r.y-=parseFloat(e.borderTopWidth)}return r}function _copyPopupStyles(e,t,s){if(t instanceof HTMLElement&&s){let i=s instanceof HTMLElement?s:t,r=getComputedStyle(i);1==new Color(r.backgroundColor).a&&setCss(e,{color:r.color,backgroundColor:r.backgroundColor,fontFamily:r.fontFamily,fontSize:r.fontSize,fontWeight:r.fontWeight,fontStyle:r.fontStyle})}}function _hidePopupOnscroll(e,t,s){let i=t instanceof MouseEvent?t.target:t;if(i instanceof HTMLElement&&i.parentElement!=document.body){let r=Date.now(),n=i.getBoundingClientRect(),o=new Control(document.createElement("div"));e[Control._SCRL_KEY]=o;o.addEventListener(document,"scroll",a=>{if(a.target!=e.parentElement&&Date.now()-r>100&&contains(document,i)&&!contains(e,a.target)&&(a.target!=document||null!=t&&"fixed"==e.style.position)){let t=i.getBoundingClientRect(),r=Math.abs(t.left-n.left),a=Math.abs(t.top-n.top);if(r>1||a>1){isFunction(s)&&s();_hidePopup(e,!0);o.dispose()}}},!0)}}function _getPopupPosition(e,t,s,i){let r=document.documentElement,n=r.clientWidth,o=r.clientHeight,a=PopupPosition;switch(s){case a.AboveLeft:case a.AboveRight:case a.BelowLeft:case a.BelowRight:if(t){let s=t.width;if(s){isIE()&&(s-=e.offsetWidth-e.clientWidth);e.style.minWidth=s+"px"}}}let l=getComputedStyle(e),h=parseFloat(l.marginTop)+parseFloat(l.marginBottom),c=parseFloat(l.marginLeft)+parseFloat(l.marginRight),u=new Size(e.offsetWidth+c,e.offsetHeight+h),d=new Point((n-u.width)/2,Math.round((o-u.height)/2*.7));if(t){"rtl"==l.direction&&(s=_getRtlPosition(s));let e=t.left,i=n-t.right;d.x=t.left;switch(s){case a.Above:case a.Below:d.x=t.left+(t.width-u.width)/2;break;case a.AboveLeft:case a.BelowLeft:d.x=t.left;break;case a.AboveRight:case a.BelowRight:d.x=t.right-u.width;break;case a.Left:case a.LeftTop:case a.LeftBottom:d.x=e>=u.width||e>=i?t.left-u.width:t.right;break;case a.RightTop:case a.RightBottom:case a.Right:d.x=i>=u.width||i>=e?t.right:t.left-u.width}let r=t.top,h=o-t.bottom;switch(s){case a.Above:case a.AboveLeft:case a.AboveRight:d.y=r>u.height||r>h?t.top-u.height:t.bottom;break;case a.Below:case a.BelowLeft:case a.BelowRight:d.y=h>u.height||h>r?t.bottom:t.top-u.height;break;case a.LeftTop:case a.RightTop:d.y=t.top;break;case a.LeftBottom:case a.RightBottom:d.y=t.bottom-u.height;break;case a.Left:case a.Right:d.y=t.bottom-u.height+(u.height-t.height)/2}}d.x=Math.min(d.x,n-u.width);d.y=Math.min(d.y,o-u.height);d.x=Math.max(0,d.x)+i.x;d.y=Math.max(0,d.y)+i.y;return d}function _getRtlPosition(e){let t=PopupPosition;switch(e){case t.AboveLeft:return t.AboveRight;case t.AboveRight:return t.AboveLeft;case t.BelowLeft:return t.BelowRight;case t.BelowRight:return t.BelowLeft;case t.Left:return t.Right;case t.LeftTop:return t.RightTop;case t.LeftBottom:return t.RightBottom;case t.Right:return t.Left;case t.RightTop:return t.LeftTop;case t.RightBottom:return t.LeftBottom}return e}function _getReferenceRect(e,t){return t instanceof MouseEvent?t.clientX<=0&&t.clientY<=0&&t.target instanceof HTMLElement?Rect.fromBoundingRect(t.target.getBoundingClientRect()):new Rect(t.pageX-pageXOffset,t.pageY-pageYOffset,0,0):t instanceof Point?new Rect(t.x,t.y,0,0):t instanceof HTMLElement?Rect.fromBoundingRect(t.getBoundingClientRect()):t&&null!=t.top&&null!=t.left?t:null}class Tooltip{constructor(e){this._showAutoTipBnd=this._showAutoTip.bind(this);this._hideAutoTipBnd=this._hideAutoTip.bind(this);this._mousemoveBnd=this._mousemove.bind(this);this._html=!0;this._gap=6;this._isAnimated=!1;this._position=PopupPosition.Above;this._showAtMouse=!1;this._showDelay=500;this._hideDelay=0;this._tips=[];this.popup=new Event;copy(this,e)}get position(){return this._position}set position(e){this._position=asEnum(e,PopupPosition)}get isAnimated(){return this._isAnimated}set isAnimated(e){this._isAnimated=asBoolean(e)}setTooltip(e,t,s){e=getElement(e);t=this._getContent(t);let i=this._indexOf(e);if(i>-1){this._detach(e);this._tips.splice(i,1)}if(t){this._attach(e);this._tips.push({element:e,content:t,position:s})}let r=Tooltip._eTip;r&&r[Control._TTIP_KEY]==e&&(t?this._setContent(t):this._hideAutoTip())}getTooltip(e){e=getElement(e);let t=this._tips;for(let s=0;s<t.length;s++)if(t[s].element==e)return t[s].content;return null}show(e,t,s,i){e=getElement(e);t=this._getContent(t);if(!e)return;null==i&&(i=this.position);let r=Tooltip._eTip;if(!r){addClass(r=Tooltip._eTip=document.createElement("div"),"wj-tooltip");r.style.visibility="none"}addClass(r,this.cssClass);this._setContent(t);r[Control._TTIP_KEY]=e;let n=new TooltipEventArgs(t,e);this.onPopup(n);if(n.content&&!n.cancel){this._setContent(n.content);s||(s=Rect.fromBoundingRect(e.getBoundingClientRect()));let t=this.gap,o=PopupPosition;if(t)switch(i){case o.Above:case o.AboveLeft:case o.AboveRight:case o.Below:case o.BelowLeft:case o.BelowRight:s=s.inflate(0,t);break;default:s=s.inflate(t,0)}showPopup(r,s,i,this.isAnimated);document.addEventListener("mousedown",this._hideAutoTipBnd)}}hide(){let e=Tooltip._eTip;if(e){removeChild(e);removeClass(e,this.cssClass);e.innerHTML=""}document.removeEventListener("mousedown",this._hideAutoTipBnd)}dispose(){this.isVisible&&this.hide();let e=this._tips;if(e.length){e.forEach(e=>{this._detach(e.element)});e.splice(0,e.length)}this._clearTimeouts()}get isVisible(){let e=Tooltip._eTip;return null!=e&&null!=e.parentElement&&e.offsetWidth>0}get isContentHtml(){return this._html}set isContentHtml(e){this._html=asBoolean(e)}get cssClass(){return this._cssClass}set cssClass(e){this._cssClass=asString(e)}get gap(){return this._gap}set gap(e){this._gap=asNumber(e)}get showAtMouse(){return this._showAtMouse}set showAtMouse(e){this._showAtMouse=asBoolean(e)}get showDelay(){return this._showDelay}set showDelay(e){this._showDelay=asInt(e)}get hideDelay(){return this._hideDelay}set hideDelay(e){this._hideDelay=asInt(e)}onPopup(e){this.popup&&this.popup.raise(this,e);return!e.cancel}_indexOf(e){for(let t=0;t<this._tips.length;t++)if(this._tips[t].element==e)return t;return-1}_attach(e){e.addEventListener("mouseenter",this._showAutoTipBnd);e.addEventListener("mouseleave",this._hideAutoTipBnd);e.addEventListener("click",this._showAutoTipBnd);this.showAtMouse&&e.addEventListener("mousemove",this._mousemoveBnd)}_detach(e){e.removeEventListener("mouseenter",this._showAutoTipBnd);e.removeEventListener("mouseleave",this._hideAutoTipBnd);e.removeEventListener("click",this._showAutoTipBnd);e.removeEventListener("mousemove",this._mousemoveBnd)}_showAutoTip(e){if(e.defaultPrevented)return;if("click"==e.type&&!Control._touching){this._hideAutoTip();return}let t="mouseenter"==e.type?this._showDelay:0,s=this._hideDelay;this._clearTimeouts();this._eMouse=e;this._toShow=setTimeout(()=>{let t=this._indexOf(e.target);if(t>-1){let e=this._tips[t],i=this._eMouse,r=this._showAtMouse?new Rect(i.clientX,i.clientY,0,0):null;this.show(e.element,e.content,r,e.position);s>0&&(this._toHide=setTimeout(()=>{this.hide()},s))}},t)}_mousemove(e){this._eMouse=e}_hideAutoTip(){this._clearTimeouts();this.hide()}_clearTimeouts(){if(this._toShow){clearTimeout(this._toShow);this._toShow=null}if(this._toHide){clearTimeout(this._toHide);this._toHide=null}}_getContent(e){if((e=asString(e))&&"#"==e[0]){let t=getElement(e);t&&(e=t.innerHTML)}return e}_setContent(e){let t=Tooltip._eTip;t&&(this._html?t.innerHTML=e:t.textContent=e)}}exports.Tooltip=Tooltip;class TooltipEventArgs extends CancelEventArgs{constructor(e,t){super();this._content=asString(e);this._e=t}get tip(){return Tooltip._eTip}get element(){return this._e}get content(){return this._content}set content(e){this._content=asString(e)}}exports.TooltipEventArgs=TooltipEventArgs;_registerModule("wijmo",selfModule);var theLic="The Wijmo license in this application ",_licStr={evl:"Wijmo Evaluation Version ({version})",prd:theLic+"is not valid for the <b>{control}</b> control.",ver:theLic+"is not valid for the version in use. The license version is <b>{licVer}</b>; the product version is <b>{version}</b>.",dmn:theLic+"is not valid for the current domain. The license domain is <b>{licDomain}</b>; the current domain is <b>{domain}</b>.",exp:theLic+"has expired. The license expiration date is <b>{expDate:d}</b>.",lic:theLic+"is invalid.",mss:theLic+"is not set.",ctc:'Please <a target="_blank" rel="noopener" href="https://www.grapecity.com/licensing/wijmo">create a license</a> or contact GrapeCity: <a href="mailto:us.sales@grapecity.com">us.sales@grapecity.com</a>.',hdr:"Wijmo License",cls:"CLOSE"},_codes={};function _updateWme(e,t){let s=Control._wme;if(!(s&&contains(document.body,s)&&s.offsetWidth&&s.offsetHeight))if(t){let s=_getControlCode(e);if(!_codes[s]){_codes[s]=!0;_attorn(t,{algorithmCode:"B0",publicKey:"l6/zrbWoSbcLFwEetFh38rH3ErBZE9H+Cqix3R+wTlfA1wD5B+lUcCQn+EJ60I4RGrm0x1sFjkiLWwB0jAn6BWZv0W4WbqAKriOdeoivxDp1Wmjs3qkEDhvbsjPtfvwx2BHil6o+/tDrdMJQSGs18WZm2PoQLQuL+9VhZ4FNRHUQU3Jtioke/OZEGHJOdYVwvCGalzBad6QFOiVbDBQPePpS3++GJzOxN8SN/7lyS5/IdKiy3WJRaVGkB370+HbN6hKraDfUgReLX26yxRaKC/5aWnGAJ2NnWLoGyAGRcwT9dVjo4bcAZNrrA0U9JVKQxaSskhdv2p49XzJkltXx5w=="},s=>{_checkLicense(e,t,s)},()=>{_checkLicense(e,t,null)});setTimeout(()=>{delete _codes[s]},50)}}else _checkLicense(e,null,null)}exports._updateWme=_updateWme;function _getControlCode(e){return e._getProductInfo().split(",")[0]}function _getControlName(e){return e._getProductInfo().split(",")[1]}function _checkLicense(e,t,s){let i=exports.culture.Licensing||_licStr,r=null;s?_checkExpiration(e,s)?_checkVersion(e,s)?_checkDomain(e,s)?_checkProductCode(e,s)?_checkEval(e,s)&&(r=i.evl):r=i.prd:r=i.dmn:r=i.ver:r=i.exp:r=t?i.lic:i.mss;r&&_addWme(e,r+="<br/><br/>"+i.ctc,s)}function _checkProductCode(e,t){let s=_getControlCode(e);if(s&&s.length>=4)for(let e=0;e<t.Prd.length;e++)if(t.Prd[e].C.indexOf(s)>-1)return!0;return!1}function _checkExpiration(e,t){if(t.Exp){let e=t.Exp,s=new Date(parseInt(e.substr(0,4))||0,parseInt(e.substr(4,2))-1||0,parseInt(e.substr(6,2))||0);if(Math.ceil((s.valueOf()-Date.now())/864e5)<=0)return!1}return!0}function _checkVersion(e,t){let s=t.Anl?t.Anl.ver:null,i=getVersion();if(s&&i){return parseInt(s.replace("v",""))+10>=parseInt(i.split(".")[1])}return!0}function _checkDomain(e,t){if(_isLocalHost()||!t.Dms)return!0;let s=location.hostname,i=t.Dms.split(",");for(let e=0;e<i.length;e++)if(_checkHost(s,i[e]))return!0;return!1}function _checkHost(e,t){var s="^"+t.replace(/\./g,"\\.").replace(/\*/g,"(.*)")+"$",i=new RegExp(s,"i").test(e);return i||"*."!=t.substr(0,2)?i:_checkHost(e,t.substr(2))}function _checkEval(e,t){return!!t&&t.Evl}function _isLocalHost(){let e=location,t=atob("Xih8bG9jYWxob3N0fGZpZGRsZS5qc2hlbGwubmV0fHJ1bi5wbG5rci5jb3xzLmNvZGVwZW4uaW98bnVsbC5qc2Jpbi5jb218Lio/LnN0YWNrYmxpdHouaW98MTI3LjAuMC4xfFt3LV0rLmxvY2FsfFt3LV0rfDo6MSkk");return"file:"==e.protocol||new RegExp(t,"i").test(e.hostname)}function _addWme(e,t,s){t=_getMessage(e,t,s);if(!_codes[" "]&&!_isLocalHost()&&!_checkEval(e,s)){_codes[" "]=!0;let e=exports.culture.Licensing||_licStr,s=createElement('<div style="position:fixed;background:rgba(0,0,0,0.3);left:0;top:0;width:100%;height:100%;font-family: sans-serif;z-index:10000;"><div style="position:relative;overflow:auto;background:white;width:450px;padding:36pt;left:50%;top:50%;transform:translate(-50%,-50%)"><div><p style="font-size:150%;font-weight:bold">'+e.hdr+"</p><p>"+t+'</p></div><div style="text-align:right;margin-top:24pt"><button style="border:none;background:rgba(158,158,158,.2);padding:8px 16px">'+e.cls+"</button></div></div></div>",document.body);s.addEventListener("click",e=>{e.target instanceof HTMLButtonElement&&removeChild(s)})}if(!Control._wme){let s=createElement('<div><a href="'+_getWmeHref()+'" target="_blank" rel="noopener">'+_getMessage(e)+"</a></div>"),i={position:"fixed",display:"block",visibility:"visible",background:"rgba(240,240,240,.9)",padding:"8px 12px",margin:"6px",fontFamily:"sans-serif",fontSize:"14pt",fontWeight:"bold",zIndex:1e4,opacity:.8,height:"auto",width:"auto",transform:"none"};switch(Math.round(100*Math.random())%3){case 0:i.right=i.bottom=0;break;case 1:i.left=i.bottom=0;break;case 2:i.right=i.top=0}setCss(s,i);document.body.appendChild(s);Control._wme=s;(new Tooltip).setTooltip(s,t)}}function _getWmeHref(){return"ja"==exports.culture.Globalize.name?"https://www.grapecity.co.jp/developer/support/wijmo-license":"https://www.grapecity.com/licensing/wijmo"}function _getMessage(e,t,s){if(!t||t.trim().length<15){t=(exports.culture.Licensing||_licStr).evl}(!t||t.trim().length<15)&&(t=atob("V2lqbW8gRXZhbHVhdGlvbiBWZXJzaW9uICh7dmVyc2lvbn0p"));let i=null;if(s&&s.Exp){let e=s.Exp;i=new Date(parseInt(e.substr(0,4))||0,parseInt(e.substr(4,2))-1||0,parseInt(e.substr(6,2))||0)}return t=format(t,{version:getVersion(),domain:location.hostname,control:_getControlName(e),licVer:s&&s.Anl?"5."+s.Anl.ver.replace("v","")+".*":null,licDomain:s?s.Dms:null,expDate:i})}function _attorn(e,t,s,i){let r=parseKeyData(e,t.algorithmCode);if(!r)return i();let n=r.lic,o=r.prefix+"#"+t.algorithmCode;if(tripleHash(o+JSON.stringify(n.D))!=n.H)return i();let a=window.msCrypto||window.crypto,l=a?a.subtle:null;if(!l||!location.protocol.match(/^https/i))return s(n.D);let h={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},c={alg:"RS256",e:"AQAB",kty:"RSA",n:str64ToJwkBase64(t.publicKey)};c=window.msCrypto?str2ArrayBuffer(JSON.stringify(c)):c;try{asPromise(l.importKey("jwk",c,h,!1,["verify"])).then(e=>{let t=arrayBuffer2Str(str64ToArrayBuffer(str64EncodeUnicode(o+JSON.stringify(n.D))));asPromise(l.verify(h,e,str64ToArrayBuffer(n.S),str2ArrayBuffer(t))).then(e=>e?s(n.D):i())},()=>s(n.D))}catch(e){return s(n.D)}}var uint8Array="undefined"==typeof window?null:window.Uint8Array||window.TypedArray;function parseKeyData(e,t){try{t="#"+t;let s=e.indexOf(t);if(s>-1)return{prefix:e.substring(0,s),lic:JSON.parse(decode(e.substr(s+t.length)))}}catch(e){}return null}function decode(e){if(!e)return"";let t=unshiftString(e);t=reverseString(t);let s=Math.ceil(t.length/2);return str64DecodeUnicode(t=(t=(t=t.substr(s)+t.substr(0,s)).replace("#","=")).replace("&","=="))}function unshiftString(e){let t=e.split("");for(let e=t.length-5;e>=0;e--){swapArrayElements(t,e+1,e+3,unshiftChar);swapArrayElements(t,e,e+2,unshiftChar)}return t.join("")}function swapArrayElements(e,t,s,i){e.length>1&&e.splice(s,1,i(e.splice(t,1,i(e[s]))[0]))}function shiftChar(e,t){let s=e.charCodeAt(0);return s>=65&&s<=90?e.toLowerCase():s>=97&&s<=122?e.toUpperCase():s>=48&&s<=57?String.fromCharCode(48+(s-48+10+t)%10):e}function unshiftChar(e){return shiftChar(e,-1)}function reverseString(e){return e.split("").reverse().join("")}function str64DecodeUnicode(e){let t=atob(e),s="";for(let e=0;e<t.length;e++)s+="%"+("00"+t.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(s)}function arrayBuffer2Str(e){return String.fromCharCode.apply(null,new uint8Array(e))}function str64ToArrayBuffer(e){let t=atob(e),s=t.length,i=new uint8Array(s);for(let e=0;e<s;e++)i[e]=t.charCodeAt(e);return i.buffer}function str64EncodeUnicode(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(e,t)=>String.fromCharCode(parseInt(t,16))))}function str64ToJwkBase64(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")}function str2ArrayBuffer(e){let t=new ArrayBuffer(e.length),s=new uint8Array(t);for(let t=0,i=e.length;t<i;t++)s[t]=e.charCodeAt(t);return t}function tripleHash(e){let t=0,s=5381,i=0;for(let r=e.length-1;r>=0;r--){let n=e.charCodeAt(r);t=n+(t<<6)+(t<<16)-t;s=n+((s<<5)+s);i=n+((i<<5)-i)}let r=t^s^i;r<0&&(r=~r);return r.toString(16).toUpperCase()}function asPromise(e){if("oncomplete"in e){e.then=(t,s)=>{e.resolve=t;e.reject=s};e.oncomplete=t=>{e.resolve(e.result)};e.onerror=t=>{e.reject()}}return e}