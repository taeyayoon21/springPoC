/*!
    *
    * Wijmo Library 5.20202.724
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */

var __rest=this&&this.__rest||function(e,t){var l={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(l[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&(l[o[i]]=e[o[i]])}return l};import{VueApi,WjComponentBehavior}from"wijmo/wijmo.vue2.base";import*as wjcCore from"wijmo/wijmo";import*as wjcGrid from"wijmo/wijmo.grid";import*as wjcInteropGrid from"wijmo/wijmo.interop.grid";export var CellTemplateType=wjcInteropGrid.GridCellTemplateType;class WjFlexGridBehavior extends WjComponentBehavior{_createControl(){let e=super._createControl();new DirectiveCellFactory(e);return e}}WjFlexGridBehavior.tag="wj-flex-grid";WjFlexGridBehavior.props=["isDisabled","newRowAtTop","allowAddNew","allowDelete","allowDragging","allowMerging","allowResizing","allowSorting","allowPinning","autoScroll","autoRowHeights","autoSizeMode","autoGenerateColumns","autoSearch","caseSensitiveSearch","quickAutoSize","bigCheckboxes","childItemsPath","groupHeaderFormat","headersVisibility","showSelectedHeaders","showMarquee","itemFormatter","isReadOnly","imeEnabled","mergeManager","selectionMode","showGroups","showSort","showDropDown","showAlternatingRows","showErrors","alternatingRowStep","validateEdits","treeIndent","itemsSource","autoClipboard","expandSelectionOnCopyPaste","frozenRows","frozenColumns","cloneFrozenCells","deferResizing","sortRowIndex","editColumnIndex","stickyHeaders","preserveSelectedState","preserveOutlineState","preserveWhiteSpace","keyActionTab","keyActionEnter","rowHeaderPath","virtualizationThreshold","anchorCursor","lazyRender","refreshOnEdit","copyHeaders","columnGroups"];WjFlexGridBehavior.events=["initialized","gotFocus","lostFocus","refreshing","refreshed","invalidInput","beginningEdit","cellEditEnded","cellEditEnding","prepareCellForEdit","formatItem","resizingColumn","resizedColumn","autoSizingColumn","autoSizedColumn","draggingColumn","draggingColumnOver","draggedColumn","sortingColumn","sortedColumn","pinningColumn","pinnedColumn","resizingRow","resizedRow","autoSizingRow","autoSizedRow","draggingRow","draggingRowOver","draggedRow","deletingRow","deletedRow","loadingRows","loadedRows","rowEditStarting","rowEditStarted","rowEditEnding","rowEditEnded","rowAdded","groupCollapsedChanging","groupCollapsedChanged","itemsSourceChanging","itemsSourceChanged","selectionChanging","selectionChanged","scrollPositionChanged","updatingView","updatedView","updatingLayout","updatedLayout","pasting","pasted","pastingCell","pastedCell","copying","copied"];WjFlexGridBehavior.classCtor=function(){return wjcGrid.FlexGrid};export var WjFlexGrid=WjFlexGridBehavior.register();function registerV3WjFlexGrid(e){e.component(WjFlexGridBehavior.tag,WjFlexGrid)}class WjFlexGridColumnBehavior extends WjComponentBehavior{_initParent(){var e=this.parent.control;if(e.autoGenerateColumns){e.autoGenerateColumns=!1;e.columns.clear()}super._initParent()}}WjFlexGridColumnBehavior.tag="wj-flex-grid-column";WjFlexGridColumnBehavior.parentProp="columns";WjFlexGridColumnBehavior.props=["wjProperty","name","dataMap","dataType","binding","sortMemberPath","format","cellTemplate","header","width","maxLength","minWidth","maxWidth","align","allowDragging","allowSorting","allowResizing","allowMerging","aggregate","isReadOnly","cssClass","isContentHtml","isSelected","visible","wordWrap","multiLine","mask","inputType","isRequired","showDropDown","dataMapEditor","dropDownCssClass","quickAutoSize","editor"];WjFlexGridColumnBehavior.events=["initialized"];WjFlexGridColumnBehavior.changeEvents={"grid.selectionChanged":["isSelected"]};WjFlexGridColumnBehavior.classCtor=function(){return wjcGrid.Column};export var WjFlexGridColumn=WjFlexGridColumnBehavior.register();function registerV3WjFlexGridColumn(e){e.component(WjFlexGridColumnBehavior.tag,WjFlexGridColumn)}class DirectiveCellFactory extends wjcInteropGrid.DirectiveCellFactoryBase{shouldInstantiate(e){let t=e.templateCache;return null==t||t.column!==e.column||!t.cellCmp||t.templateContextProperty!==e.templateContextProperty||e.cell.firstChild!=t.rootElement}renderTemplate(e,t){let l=e.row,o={},i=e.templateContext;e.cellBindingsData=this.setBindingsData(o,l,e.column,l.dataItem,e.cellValue,i.valuePaths);if(t){let t=e.cell,l=i._instantiateTemplate(t,o.cell),r=e.templateCache={column:e.column,rootElement:l.$el,templateContextProperty:e.templateContextProperty,cellCmp:l};t[e.templateContextProperty]=r}else{let t=e.templateCache.cellCmp;t.context=o.cell;t.$forceUpdate()}}disposeTemplate(e,t,l){let o=t&&t.cellCmp;if(o){o.$destroy();t.cellCmp=null;super.disposeTemplate(e,t,l)}}clearCell(e){e.textContent=""}applyImmediately(e){}flushPendingEvents(e){}getEditorFocusFlag(){return!0}setEditorFocusFlag(e){}}const WjFlexGridCellTemplateDefinition={props:{cellOverflow:{default:void 0},cellType:{default:void 0},autoSizeRows:{default:!0},forceFullEdit:{default:!0}},render:function(e){return VueApi.isV3Plus?VueApi.h("div"):e("div")},mounted:function(){let e=this.$parent;if(e){let t=e[WjComponentBehavior._behProp];t._mountedCB(()=>{let l=this.ownerControl=t.control;if(l instanceof wjcGrid.FlexGrid)this.grid=l;else if(l instanceof wjcGrid.Column){this.column=l;this.grid=e.$parent[WjComponentBehavior._behProp].control}this._attachToControl()})}},destroyed:function(){this._detachFromControl()},methods:{_attachToControl:function(){let e=this.cellTypeEnum=wjcCore.asEnum(this.cellType,CellTemplateType),t=this.ownerControl;t[DirectiveCellFactory.getTemplContextProp(e)]=this;t instanceof wjcGrid.Column&&(e===CellTemplateType.Cell||e===CellTemplateType.ColumnHeader||e===CellTemplateType.ColumnFooter)&&t._setFlag(wjcGrid.RowColFlags.HasTemplate,!0);this.grid.invalidate()},_detachFromControl:function(){if(null!=this.cellTypeEnum){this.ownerControl[DirectiveCellFactory.getTemplContextProp(this.cellTypeEnum)]=null;this.grid.invalidate()}},_instantiateTemplate:function(e,t){let l=VueApi.isV3Plus?new V3CellTemplateCmp({parent:this}):new CellTemplateCmp({parent:this});l.context=t;l.slotFn=VueApi.isV3Plus?this.$slots.default:this.$scopedSlots.default;l.$mount();e&&e.appendChild(l.$el);return l}}},WjFlexGridCellTemplateTag="wj-flex-grid-cell-template";export var WjFlexGridCellTemplate=VueApi.isV3Plus?WjFlexGridCellTemplateDefinition:VueApi.component(WjFlexGridCellTemplateTag,WjFlexGridCellTemplateDefinition);function registerV3WjFlexGridCellTemplate(e){e.component(WjFlexGridCellTemplateTag,WjFlexGridCellTemplate)}var CellTemplateCmp=VueApi.extend({render:function(e){const t=this.slotFn;return e("div",t&&[t(this.context)])}});class V3CellTemplateCmp{constructor(e){this.props=e;this._host=document.createElement("div")}$mount(){const e=VueApi.h,t=this.props,{parent:l}=t,o=__rest(t,["parent"]);VueApi.render(e({parent:l,render:()=>e("div",o,this.slotFn&&this.slotFn(this.context))}),this.$el)}get $el(){return this._host}$destroy(){VueApi.render(null,this.$el);this._host=null}$forceUpdate(){this._host&&this.$mount()}}export function registerGrid(e){if(VueApi.isV3Plus){registerV3WjFlexGrid(e);registerV3WjFlexGridColumn(e);registerV3WjFlexGridCellTemplate(e)}}