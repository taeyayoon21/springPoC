/*!
    *
    * Wijmo Library 5.20202.724
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */

var __extends=this&&this.__extends||function(){var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();import{WjDirective,WjLink,_registerNgModule,softRefGridDetail}from"wijmo/wijmo.angular.base";import*as mNg from"angular";import*as wjcGridDetail from"wijmo/wijmo.grid.detail";var wjNg=mNg,wijmoGridDetailName="wj.grid.detail";export var ngModuleName=wijmoGridDetailName;var wijmoGridDetail=_registerNgModule(wijmoGridDetailName);softRefGridDetail()&&wijmoGridDetail.directive("wjFlexGridDetail",["$compile",function(e){return new WjFlexGridDetail(e)}]);var WjFlexGridDetail=function(e){__extends(WjFlexGridDetail,e);function WjFlexGridDetail(t){var i=e.call(this)||this;i._$compile=t;i.require="^wjFlexGrid";i.terminal=!0;if(WjDirective._dynaTemplates){i.transclude=!1;i.priority=100;i.template=function(e,t){t[WjFlexGridDetail._detailTemplateProp]=e[0].innerHTML;return"<div />"}}else{i.transclude=!0;i.template="<div ng-transclude/>"}return i}Object.defineProperty(WjFlexGridDetail.prototype,"_controlConstructor",{get:function(){return wjcGridDetail.FlexGridDetailProvider},enumerable:!0,configurable:!0});WjFlexGridDetail.prototype._createLink=function(){return new WjFlexGridDetailLink};WjFlexGridDetail._detailTemplateProp="$__wjDetailTemplate";WjFlexGridDetail._detailScopeProp="$_detailScope";return WjFlexGridDetail}(WjDirective);export{WjFlexGridDetail};var WjFlexGridDetailLink=function(e){__extends(WjFlexGridDetailLink,e);function WjFlexGridDetailLink(){return null!==e&&e.apply(this,arguments)||this}WjFlexGridDetailLink.prototype._initParent=function(){e.prototype._initParent.call(this);var t=this,i=this.tAttrs[WjFlexGridDetail._detailTemplateProp],r=this.control;this.itemTemplate=this._getCellTemplate(null!=i?i:WjDirective._removeTransclude(this.tElement[0].innerHTML));var l=this._getCellTemplate(this.itemTemplate);this._tmplLink=this.directive._$compile("<div>"+l+"</div>");r.createDetailCell=function(e,i){var l=t._getCellScope(t.scope.$parent,e,i),n=t._tmplLink(l,(function(e,t){}))[0];n[WjDirective._elemScopeProp]=l;r.grid.hostElement.appendChild(n);l.$root&&!l.$root.$$phase&&l.$apply();n.parentElement.removeChild(n);return n};r.disposeDetailCell=function(e){if(e.detail){var t=e.detail[WjDirective._elemScopeProp];t&&t.$destroy()}};this.parent._isInitialized&&this.control&&this.control.invalidate()};WjFlexGridDetailLink.prototype._destroy=function(){var t=this.parent&&this.parent.control,i=this.control;i.createDetailCell=null;i.disposeDetailCell=null;e.prototype._destroy.call(this);this._tmplLink=null;t&&t.invalidate()};WjFlexGridDetailLink.prototype._getCellScope=function(e,t,i){var r=e.$new();r.$row=t;r.$col=i;r.$item=t.dataItem;return r};WjFlexGridDetailLink.prototype._getCellTemplate=function(e){e&&(e=(e=(e=e.replace(/ng\-style/g,"style")).replace(/ class\=\"ng\-scope\"( \"ng\-binding\")?/g,"")).replace(/<span>\s*<\/span>/g,""));return e};return WjFlexGridDetailLink}(WjLink);