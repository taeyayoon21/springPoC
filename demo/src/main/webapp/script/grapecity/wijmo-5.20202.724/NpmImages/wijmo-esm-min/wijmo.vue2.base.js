/*!
    *
    * Wijmo Library 5.20202.724
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */

var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t}).apply(this,arguments)};import{isArray,Control,isUndefined,isFunction,Event}from"wijmo/wijmo";import*as VueModule from"vue";import VueModuleDefault from"vue";var Vue=VueModuleDefault||VueModule;export var VueApi=Vue.version&&"3"===Vue.version[0]?{isV3Plus:!0,modelValueProp:"modelValue",extend:function(t){return t},h:Vue.h,render:Vue.render}:Vue;var WjVueBase=VueApi.extend({beforeCreate:function(){var t=this.$options[WjComponentBehavior._behClassProp];t&&(this[WjComponentBehavior._behProp]=t._attach(this))},mounted:function(){this[WjComponentBehavior._behProp].lhMounted()},destroyed:function(){this[WjComponentBehavior._behProp].lhDestroyed()}}),WjComponentBehavior=function(){function WjComponentBehavior(t){this._isMounted=!1;this._mountedCBs=[];this.component=t}WjComponentBehavior._attach=function(t){return new this(t)};WjComponentBehavior.register=function(){var t,e=((t={data:this.data,extends:WjVueBase,render:this.render,props:this._getProps(),model:this._getModel()})[WjComponentBehavior._behClassProp]=this,t);return VueApi.isV3Plus?__assign({},e,{emits:this._getEmits()}):VueApi.component(this.tag,e)};WjComponentBehavior.prototype.lhMounted=function(){var t=this;if(this._isChild()){var e=this.component.$parent;if(e){this.parent=e[WjComponentBehavior._behProp];this.parent._mountedCB((function(){t._prepareControl();t._initParent()}))}}else this._prepareControl()};WjComponentBehavior.prototype.lhDestroyed=function(){this._siblingInsertedEH&&this._getElement().removeEventListener("DOMNodeInserted",this._siblingInsertedEH);var t=this.control;if(t)if(this._isChild()){var e=this._getParentProp();if(e){var n=this.parent.control[e];if(isArray(n)){var o=n.indexOf(t);o>-1&&n.splice(o,1)}}}else t instanceof Control&&t.dispose()};WjComponentBehavior._getProps=function(){var t=[];this.props&&(t=this.props);this.events&&(t=t.concat(this.events));this.changeEvents&&(t=t.concat(Object.keys(this.changeEvents)));VueApi.isV3Plus&&this.modelProp&&t.push(VueApi.modelValueProp);return t};WjComponentBehavior._getModel=function(){var t=this.modelProp;return t?{prop:t,event:"update:"+t}:null};WjComponentBehavior._getEmits=function(){var t=this;if(!this.changeEvents)return[];var e=[];Object.keys(this.changeEvents).forEach((function(n){return t.changeEvents[n].forEach((function(t){e.indexOf(t)<0&&e.push(t)}))}));this.modelProp&&e.push(VueApi.modelValueProp);return e.map((function(t){return"update:"+t}))};WjComponentBehavior.prototype._createControl=function(){var t=this._isChild()?this._isParentInCtor()?this.parent.control:void 0:this._getElement();return new(this.constructor._getControlType())(t)};WjComponentBehavior.prototype._initParent=function(){var t=this._getParentProp();if(t){var e=this.parent.control,n=e[t];if(isArray(n)){var o=this._getSiblingIndex();(o<0||o>=n.length)&&(o=n.length);n.splice(o,0,this.control);this._siblingInsertedEH=this._siblingInserted.bind(this);this._getElement().addEventListener("DOMNodeInserted",this._siblingInsertedEH)}else e[t]=this.control}};WjComponentBehavior.prototype._updateControl=function(t,e){this.control[t]=e};WjComponentBehavior.prototype._prepareControl=function(){var t=this.control=this._createControl(),e=this._getElement(),n=this.constructor;this.component.control=t;if(!this._siblingId){null==n.siblingId&&(n.siblingId=++n._siblingDirId+"");this._siblingId=n.siblingId}e.setAttribute(n._typeSiblingIdAttr,this._siblingId);this._isMounted=!0;var o=this._mountedCBs;this._mountedCBs=[];for(var i=0,r=o;i<r.length;i++){(0,r[i])()}_initialize(this)};WjComponentBehavior.prototype._isChild=function(){var t=this.constructor;return null!=t.parentProp||null!=t.parentInCtor};WjComponentBehavior.prototype._isParentInCtor=function(){return!0===this.constructor.parentInCtor};WjComponentBehavior.prototype._getParentProp=function(){return(VueApi.isV3Plus?this.component.$props:this.component.$options.propsData).wjProperty||this.constructor.parentProp};WjComponentBehavior.prototype._getSiblingIndex=function(){var t=this._getElement(),e=t.parentElement;if(!e)return-1;for(var n=e.childNodes,o=-1,i=this._siblingId,r=0;r<n.length;r++){var s=n[r];if(1==s.nodeType&&s.getAttribute(WjComponentBehavior._typeSiblingIdAttr)==i){++o;if(s===t)return o}}return-1};WjComponentBehavior.prototype._siblingInserted=function(t){if(t.target===this._getElement()){var e=this._getSiblingIndex(),n=this.control,o=this.parent.control[this._getParentProp()],i=o.indexOf(n);if(e>=0&&i>=0&&e!==i){o.splice(i,1);e=Math.min(e,o.length);o.splice(e,0,n)}}};WjComponentBehavior.prototype._getElement=function(){return this.component.$el};WjComponentBehavior._getControlType=function(){return this.classCtor()};WjComponentBehavior.prototype._mountedCB=function(t){this._isMounted?t():this._mountedCBs.push(t)};WjComponentBehavior.render=function(t){var e=this.$slots.default;return VueApi.isV3Plus?VueApi.h("div",{},[e&&e()]):t("div",[e])};WjComponentBehavior._typeSiblingIdAttr="_wjSiblingId";WjComponentBehavior._behClassProp="_wjBehCl";WjComponentBehavior._behProp="__wjBeh";WjComponentBehavior._propIdxMapProp="__propInitIdx";WjComponentBehavior._siblingDirId=0;return WjComponentBehavior}();export{WjComponentBehavior};export function _initialize(t){var e=t.component,n=t.control,o=t.constructor,i=o[WjComponentBehavior._propIdxMapProp];if(!i){i=o[WjComponentBehavior._propIdxMapProp]={};var r=o.props;if(r)for(var s=0;s<r.length;s++)i[r[s]]=s}var p=[],a=[],h=[],u=o.changeEvents||{},l=VueApi.isV3Plus?e.$props:e.$options.propsData,d=o.modelProp;for(var c in l)null!=i[c]?p.push(c):u[c]?h.push(c):a.push(c);VueApi.isV3Plus&&d&&l.hasOwnProperty(VueApi.modelValueProp)&&!l.hasOwnProperty(d)&&p.push(d);p.sort((function(t,e){return i[t]-i[e]}));e[WjComponentBehavior._behProp].constructor.extraProps;function _subscribeEvents(t){t.forEach((function(t){"initialized"!==t&&t.indexOf(".")<0&&isFunction(e[t])&&n[t].addHandler(e[t],n)}))}_subscribeEvents(a);p.forEach((function(t){if(VueApi.isV3Plus){var n=VueApi.modelValueProp;if(isUndefined(e[t])){if(t===d&&!isUndefined(e[n])){e[WjComponentBehavior._behProp]._updateControl(t,e[n]);e.$watch(n,_updateControl.bind({cmp:e,prop:d}))}}else e[WjComponentBehavior._behProp]._updateControl(t,e[t]);e.$watch(t,_updateControl.bind({cmp:e,prop:t}))}else{isUndefined(e[t])||e[WjComponentBehavior._behProp]._updateControl(t,e[t]);e.$watch(t,_updateControl.bind({cmp:e,prop:t}))}}));function _updateControl(t){this.cmp[WjComponentBehavior._behProp]._updateControl(this.prop,t)}!function _updateStyleProp(){var t=e.$el,o={};if("style"in n&&t.style.cssText.length){t.style.cssText.split(";").forEach((function(t){var e=t.split(":");2==e.length&&(o[e[0].trim()]=e[1].trim())}));n.style=o}}();_subscribeEvents(h);if(u)for(var v=0,_=Object.keys(u);v<_.length;v++){var m=_[v];_subscribeChangeEvents(m,u[m],n,e)}function _subscribeChangeEvents(t,e,n,o){if(e){var i=n[t];i instanceof Event&&i.addHandler((function(t,n){for(var i=0,r=e;i<r.length;i++){var s=r[i];o.$emit("update:"+s,t[s]);if(VueApi.isV3Plus&&s===d&&isUndefined(o[s])){var p=VueApi.modelValueProp;isUndefined(o[p])||o.$emit("update:"+p,t[s])}}}),n)}}isFunction(e.initialized)&&e.initialized(n);return n}